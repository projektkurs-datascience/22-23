<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Das Experiment</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <script src="libs/kePrint/kePrint.js"></script>
    <link href="libs/lightable/lightable.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/5235085b15.js"></script>
    <link rel="stylesheet" href="style/css/uni-ulm.css" type="text/css" />
    <link rel="stylesheet" href="style/css/my-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Das Experiment
]

---




## Warum sollten wir _randomisieren_?

Das Fundamentale Problem der _kausalen_ Inferenz:

- Auf individueller Ebene können keine kausalen Effekte beobachtet werden
- Es gibt keine individuellen Alternativszenarien (außer in "Zurück in die Zukunft")

.instructions[Dies bedeutet wir müssen uns durchschnittliche Effekte auf Gruppenebene anschauen!]

--

.alert[Wenn wir durchschnittliche Effekte zwischen Gruppen von Personen betrachten wollen, dann funktioniert dies nur, wenn die Gruppen die gleichen Eigenschaften haben.]

---

## Warum sollten wir _randomisieren_?

Mit einer ausreichend großen Stichprobe erhalten Sie durch Randomisierung Gruppen, die in ihren (pre-Treatment) Charakteristika gleich sind.

Übertragen auf ihr DAG bedeutet die Randomisierung: .alert[Confounder beeinflussen ihr Treatment nicht!]

--

.pull-left[

&lt;img src="Experiment_slides_files/figure-html/confounding_fam1-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

--

.pull-right[
&lt;img src="Experiment_slides_files/figure-html/confounding_fam2-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

## Wie wird randomisiert?

&lt;img src="./figs/Randomisierung_Schema.png" width="70%" style="display: block; margin: auto;" /&gt;

---

## Validität

**Interne Validität:** Misst ihre Methodik das was sie tatsächlich herausfinden wollen? D.h. können Sie die Änderung von Y _kausal_ auf die Änderung von X zurückführen?

**Externe Validität:** Lassen sich die Ergebnisse auch auf andere Datensätze übertragen/generalisieren?

--

.center[.instructions[Uns interessiert insbesondere die _interne Validität_ unserer Ergebnisse!]]

---

## Probleme für die interne Validität

- **Omitted Variables Bias**: Selbstselektion, Attrition (Schwund)
- **Trends in den Daten**: Reifung, Globale Trends, Saisonalität, Wiederholung, Regression zur Mitte
- **Kalibrierung der Studie**: Messfehler, Zeitrahmen
- **Kontamination**: Hawthorne, John Henry, Spillovers

---

## Ommitted Variable Bias

**Selbstselektion**
  - Problem: Personen können selbst entscheiden ob (oder wann) Sie an einem Programm teilnehmen oder nicht
  - Lösung: Randomisierung in Treatment und Kontrollgruppe und über die Zeit

**Attrition (Schwund)**
  - Problem: Personen die das Experiment verlassen sind unterschiedlich zu denen die bleiben
  - _Überprüfung_: Wie ähnlich sind die Personen die bleiben zu denen die gehen auf Basis beobachtbarer Charakteristika?
    
---

## Trends in den Daten

**Reifung**
  - Problem: Personen ändern sich alleine durch zunehmendes Alter zwischen zwei Messungen
  - Lösung: Kontrollgruppe verwenden um den Trend heraus rechnen zu können

**Globale Trends**
  - Problem: Globale Ereignisse können die Änderung in den Daten erklären
  - Lösung: Kontrollgruppe verwenden um den Trend heraus rechnen zu können

**Saisonalität**
  - Problem: Änderungen in den Daten basieren auf saisonalen Schwankungen
  - Lösung: Beobachtungen aus der gleichen Periode miteinander vergleichen

---

## Trends in den Daten

**Wiederholung**
  - Problem: Personen lernen natürlicherweise, wenn Sie immer den gleichen Fragen/Aufgaben ausgesetzt sind
  - Lösung: Tests verändern, Kontrollgruppen verwenden

**Regression zur Mitte**
  - Problem: Extreme Beobachtungen werden mit der Zeit weniger Extrem (Glück, Pech ...)
  - Lösung: Keine Ausreiser selektieren, Randomisierung

---

## Kalibrierung der Studie

**Falsche Messung**
  - Problem: Der Output wird nicht richtig gemessen
  - Lösung: Output muss richtig gemessen werden

**Zeitrahmen**
  - Problem: Studie ist zu kurz (oder zu lange) angelegt
  - Lösung: Richtigen Zeitrahmen anlegen


---

## Kontamination

**Hawthorne Effekt**
  - Problem: Personen verhalten sich unterscheidlich wenn diese beobachtet werden
  - Lösung: Versteckte Kontrollgruppen verwenden?

**John Henry Effekt**
  - Problem: Kontrollgruppe arbeitet sehr hart um zu zeigen das sie so gut wie die Treatment Gruppe sind
  - Lösung: Kontroll und Treatmentgruppe separat halten

**Spillover Effekt**
  - Problem: Kontrollgruppe lernt über die Zeit von der Treatment Gruppe
  - Lösung: Räumlich getrennte Kontrollgruppen verwenden


---

## Randomisiertes Experiment

.alert[Randomisierung löst viele Probleme der internen Validität!]

.question[Wie lassen sich die Ergebnisse eines Experiments interpretieren?]

--

Schritt 1: Untersuchen Sie ob die demographischen Faktoren und andere Charakteristika zwischen Treatment und Kontrollgruppe ähnlich sind (gebalanced)

Schritt 2: Untersuchen Sie die durchschnittlichen Differenzen im Ergebnis zwischen Treatment und Kontrollgruppe

---

## Experiment - Wochenbettdepressionen

.alert[Wir wollen uns einem Experiment zuwenden, dessen zeitliche Abfolge Sie hier sehen:]

&lt;img src="./figs/Experiment.png" width="70%" style="display: block; margin: auto;" /&gt;

.small[Quelle: Baranov, Victoria, Sonia Bhalotra, Pietro Biroli, and Joanna Maselko. 2020. "Maternal Depression, Women's Empowerment, and Parental Investment: Evidence from a Randomized Controlled Trial." American Economic Review, 110 (3): 824-59.]

---

## Experiment - Wochenbettdepressionen

**Was sind Wochenbettdepressionen?**

**Postpartale Stimmungskrisen** (von lat. partus Geburt, Entbindung) beschreiben psychische Zustände oder Störungen, die in einem **zeitlichen Zusammenhang mit dem Wochenbett** auftreten (lat. post = nach; partus = Entbindung, Trennung).[1] Die Bandbreite der im Wochenbett auftretenden affektiven Zustände reicht von einer leichten Traurigkeit über Depressionen bis hin zu schweren psychotischen Erkrankungen.

Quelle: Wikipedia

--

.alert[Die Folgen einer Wochenbettdepression können langfristige Effekte auf die ganze Familie haben. Neben den negativen Folgen für die Gesundheit der Frau und des Kindes, verursachen Depressionen auch hohe wirtschaftliche Kosten.]

---

## Experiment - Wochenbettdepressionen


```r
thp &lt;- read_csv("../case-study/data/THP_clean.csv") 

thp %&gt;%
  select(treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline) %&gt;%
  glimpse() 
```

```
Rows: 1,203
Columns: 10
$ treat                &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ depressed_1y         &lt;dbl&gt; 1, 0, NA, 0, NA, 1, 1, 0, 0, 0, NA, 0, 0, 0, 0, 0…
$ age_baseline         &lt;dbl&gt; 28, 37, NA, 29, NA, 23, 30, 22, 30, 25, NA, 27, 2…
$ kids_no              &lt;dbl&gt; 3, 6, NA, 2, NA, 1, 3, 0, 4, 1, NA, 2, 2, 1, 2, 3…
$ first_child          &lt;dbl&gt; 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1…
$ employed_mo_baseline &lt;dbl&gt; 0, 0, NA, 0, NA, 0, 0, 0, 0, 0, NA, 0, 0, 0, 0, 0…
$ MIL                  &lt;dbl&gt; 1, 0, NA, 0, NA, 1, 0, 0, 0, 1, NA, 0, 1, 1, 0, 0…
$ maternalgma          &lt;dbl&gt; 0, 0, NA, 0, NA, 0, 0, 0, 0, 0, NA, 1, 0, 0, 0, 0…
$ edu_fa_baseline      &lt;dbl&gt; 10, 8, NA, 10, NA, 10, 0, 7, 8, 10, NA, 10, 10, 8…
$ employed_fa_baseline &lt;dbl&gt; 1, 0, NA, 1, NA, 1, 1, 1, NA, 1, NA, 1, 0, 1, 1, …
```

---

## Schritt 1: Unterschiede untersuchen

count: false
 

.panel1-balancing-auto[

```r
*thp
```
]
 
.panel2-balancing-auto[

```
# A tibble: 1,203 × 394
   newid interviewer    uc grandmother employed_mo income_mo income_hh genhealth
   &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    
 1    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 2   226           1     1 No          No                  0 60        Very good
 3   222           6     1 Yes         No                  0 200       Moderate 
 4     3           1     1 No          No                  0 150       Good     
 5   217           3     1 No          No                  0 250       0        
 6   354           1     1 Yes         No                  0 110       Very good
 7    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 8    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 9   225           4     1 No          No                  0 60        Very good
10     2           4     1 Yes         No                  0 60        Good     
# ℹ 1,193 more rows
# ℹ 386 more variables: edu_mo &lt;dbl&gt;, edu_fa &lt;dbl&gt;, ideal_no_kids &lt;chr&gt;,
#   no_kids_over5_dead &lt;dbl&gt;, no_kids_1_5_dead &lt;dbl&gt;, no_kids_less1_dead &lt;dbl&gt;,
#   mo_185 &lt;chr&gt;, mo_358 &lt;chr&gt;, mo_360 &lt;chr&gt;, c_wt &lt;dbl&gt;, c_ht &lt;dbl&gt;,
#   ch_27 &lt;chr&gt;, ch_28 &lt;chr&gt;, ch_29 &lt;chr&gt;, ch_30 &lt;chr&gt;, ch_31 &lt;chr&gt;,
#   ch_32 &lt;chr&gt;, ch_33 &lt;chr&gt;, ch_34 &lt;chr&gt;, ch_35 &lt;chr&gt;, ch_36 &lt;chr&gt;,
#   mo_ht &lt;dbl&gt;, mo_bmi &lt;dbl&gt;, hamd_baseline &lt;dbl&gt;, bdq_baseline &lt;dbl&gt;, …
```
]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
* filter(THP_sample==1)
```
]
 
.panel2-balancing-auto[

```
# A tibble: 903 × 394
   newid interviewer    uc grandmother employed_mo income_mo income_hh genhealth
   &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    
 1    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 2   226           1     1 No          No                  0 60        Very good
 3     3           1     1 No          No                  0 150       Good     
 4   354           1     1 Yes         No                  0 110       Very good
 5    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 6    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 7   225           4     1 No          No                  0 60        Very good
 8     2           4     1 Yes         No                  0 60        Good     
 9   729           1     1 No          No                  0 65        Good     
10    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
# ℹ 893 more rows
# ℹ 386 more variables: edu_mo &lt;dbl&gt;, edu_fa &lt;dbl&gt;, ideal_no_kids &lt;chr&gt;,
#   no_kids_over5_dead &lt;dbl&gt;, no_kids_1_5_dead &lt;dbl&gt;, no_kids_less1_dead &lt;dbl&gt;,
#   mo_185 &lt;chr&gt;, mo_358 &lt;chr&gt;, mo_360 &lt;chr&gt;, c_wt &lt;dbl&gt;, c_ht &lt;dbl&gt;,
#   ch_27 &lt;chr&gt;, ch_28 &lt;chr&gt;, ch_29 &lt;chr&gt;, ch_30 &lt;chr&gt;, ch_31 &lt;chr&gt;,
#   ch_32 &lt;chr&gt;, ch_33 &lt;chr&gt;, ch_34 &lt;chr&gt;, ch_35 &lt;chr&gt;, ch_36 &lt;chr&gt;,
#   mo_ht &lt;dbl&gt;, mo_bmi &lt;dbl&gt;, hamd_baseline &lt;dbl&gt;, bdq_baseline &lt;dbl&gt;, …
```
]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
  filter(THP_sample==1) %&gt;%
* select( treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline)
```
]
 
.panel2-balancing-auto[

```
# A tibble: 903 × 10
   treat depressed_1y age_baseline kids_no first_child employed_mo_baseline
   &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;   &lt;dbl&gt;       &lt;dbl&gt;                &lt;dbl&gt;
 1     1            1           28       3           0                    0
 2     1            0           37       6           0                    0
 3     1            0           29       2           0                    0
 4     1            1           23       1           0                    0
 5     1            1           30       3           0                    0
 6     1            0           22       0           1                    0
 7     1            0           30       4           0                    0
 8     1            0           25       1           0                    0
 9     1            0           27       2           0                    0
10     1            0           26       2           0                    0
# ℹ 893 more rows
# ℹ 4 more variables: MIL &lt;dbl&gt;, maternalgma &lt;dbl&gt;, edu_fa_baseline &lt;dbl&gt;,
#   employed_fa_baseline &lt;dbl&gt;
```
]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
  filter(THP_sample==1) %&gt;%
  select( treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline) %&gt;%
* pivot_longer(cols = -treat, names_to = "variable", values_to = "value")
```
]
 
.panel2-balancing-auto[

```
# A tibble: 8,127 × 3
   treat variable             value
   &lt;dbl&gt; &lt;chr&gt;                &lt;dbl&gt;
 1     1 depressed_1y             1
 2     1 age_baseline            28
 3     1 kids_no                  3
 4     1 first_child              0
 5     1 employed_mo_baseline     0
 6     1 MIL                      1
 7     1 maternalgma              0
 8     1 edu_fa_baseline         10
 9     1 employed_fa_baseline     1
10     1 depressed_1y             0
# ℹ 8,117 more rows
```
]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
  filter(THP_sample==1) %&gt;%
  select( treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline) %&gt;%
  pivot_longer(cols = -treat, names_to = "variable", values_to = "value") %&gt;%
* group_nest(variable)
```
]
 
.panel2-balancing-auto[

```
# A tibble: 9 × 2
  variable                           data
  &lt;chr&gt;                &lt;list&lt;tibble[,2]&gt;&gt;
1 MIL                           [903 × 2]
2 age_baseline                  [903 × 2]
3 depressed_1y                  [903 × 2]
4 edu_fa_baseline               [903 × 2]
5 employed_fa_baseline          [903 × 2]
6 employed_mo_baseline          [903 × 2]
7 first_child                   [903 × 2]
8 kids_no                       [903 × 2]
9 maternalgma                   [903 × 2]
```
]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
  filter(THP_sample==1) %&gt;%
  select( treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline) %&gt;%
  pivot_longer(cols = -treat, names_to = "variable", values_to = "value") %&gt;%
  group_nest(variable) %&gt;%
* mutate(t.test = map(data, ~tidy(t.test(value ~ treat, data = .x))))
```
]
 
.panel2-balancing-auto[

```
# A tibble: 9 × 3
  variable                           data t.test           
  &lt;chr&gt;                &lt;list&lt;tibble[,2]&gt;&gt; &lt;list&gt;           
1 MIL                           [903 × 2] &lt;tibble [1 × 10]&gt;
2 age_baseline                  [903 × 2] &lt;tibble [1 × 10]&gt;
3 depressed_1y                  [903 × 2] &lt;tibble [1 × 10]&gt;
4 edu_fa_baseline               [903 × 2] &lt;tibble [1 × 10]&gt;
5 employed_fa_baseline          [903 × 2] &lt;tibble [1 × 10]&gt;
6 employed_mo_baseline          [903 × 2] &lt;tibble [1 × 10]&gt;
7 first_child                   [903 × 2] &lt;tibble [1 × 10]&gt;
8 kids_no                       [903 × 2] &lt;tibble [1 × 10]&gt;
9 maternalgma                   [903 × 2] &lt;tibble [1 × 10]&gt;
```
]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
  filter(THP_sample==1) %&gt;%
  select( treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline) %&gt;%
  pivot_longer(cols = -treat, names_to = "variable", values_to = "value") %&gt;%
  group_nest(variable) %&gt;%
  mutate(t.test = map(data, ~tidy(t.test(value ~ treat, data = .x)))) %&gt;%
* unnest(t.test)
```
]
 
.panel2-balancing-auto[

```
# A tibble: 9 × 12
  variable        data estimate estimate1 estimate2 statistic  p.value parameter
  &lt;chr&gt;      &lt;list&lt;ti&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 MIL        [903 × 2] -0.0642     0.402     0.467     -1.95  5.16e- 2      900.
2 age_basel… [903 × 2]  0.505     27        26.5        1.48  1.38e- 1      897.
3 depressed… [903 × 2]  0.316      0.589     0.273      9.43  4.57e-20      770.
4 edu_fa_ba… [903 × 2]  0.134      7.09      6.95       0.507 6.12e- 1      900.
5 employed_… [903 × 2]  0.0124     0.913     0.901      0.635 5.26e- 1      888.
6 employed_… [903 × 2]  0.0125     0.0341    0.0216     1.14  2.56e- 1      841.
7 first_chi… [903 × 2] -0.00586    0.186     0.192     -0.225 8.22e- 1      900.
8 kids_no    [903 × 2]  0.172      2.33      2.16       1.43  1.52e- 1      898.
9 maternalg… [903 × 2] -0.0299     0.05      0.0799    -1.83  6.77e- 2      877.
# ℹ 4 more variables: conf.low &lt;dbl&gt;, conf.high &lt;dbl&gt;, method &lt;chr&gt;,
#   alternative &lt;chr&gt;
```
]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
  filter(THP_sample==1) %&gt;%
  select( treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline) %&gt;%
  pivot_longer(cols = -treat, names_to = "variable", values_to = "value") %&gt;%
  group_nest(variable) %&gt;%
  mutate(t.test = map(data, ~tidy(t.test(value ~ treat, data = .x)))) %&gt;%
  unnest(t.test) %&gt;%
* mutate( Mean_Treatment = round(estimate2, 2),
*         Mean_Kontrolle = round(estimate1, 2),
*   Differenz = -round(estimate, 2),
*         Signifikanz = round(p.value,2))
```
]
 
.panel2-balancing-auto[

```
# A tibble: 9 × 16
  variable        data estimate estimate1 estimate2 statistic  p.value parameter
  &lt;chr&gt;      &lt;list&lt;ti&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 MIL        [903 × 2] -0.0642     0.402     0.467     -1.95  5.16e- 2      900.
2 age_basel… [903 × 2]  0.505     27        26.5        1.48  1.38e- 1      897.
3 depressed… [903 × 2]  0.316      0.589     0.273      9.43  4.57e-20      770.
4 edu_fa_ba… [903 × 2]  0.134      7.09      6.95       0.507 6.12e- 1      900.
5 employed_… [903 × 2]  0.0124     0.913     0.901      0.635 5.26e- 1      888.
6 employed_… [903 × 2]  0.0125     0.0341    0.0216     1.14  2.56e- 1      841.
7 first_chi… [903 × 2] -0.00586    0.186     0.192     -0.225 8.22e- 1      900.
8 kids_no    [903 × 2]  0.172      2.33      2.16       1.43  1.52e- 1      898.
9 maternalg… [903 × 2] -0.0299     0.05      0.0799    -1.83  6.77e- 2      877.
# ℹ 8 more variables: conf.low &lt;dbl&gt;, conf.high &lt;dbl&gt;, method &lt;chr&gt;,
#   alternative &lt;chr&gt;, Mean_Treatment &lt;dbl&gt;, Mean_Kontrolle &lt;dbl&gt;,
#   Differenz &lt;dbl&gt;, Signifikanz &lt;dbl&gt;
```
]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
  filter(THP_sample==1) %&gt;%
  select( treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline) %&gt;%
  pivot_longer(cols = -treat, names_to = "variable", values_to = "value") %&gt;%
  group_nest(variable) %&gt;%
  mutate(t.test = map(data, ~tidy(t.test(value ~ treat, data = .x)))) %&gt;%
  unnest(t.test) %&gt;%
  mutate( Mean_Treatment = round(estimate2, 2),
          Mean_Kontrolle = round(estimate1, 2),
    Differenz = -round(estimate, 2),
          Signifikanz = round(p.value,2)) %&gt;%
* select( Mean_Treatment, Mean_Kontrolle, Differenz, Signifikanz) -&gt; total
```
]
 
.panel2-balancing-auto[

]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
  filter(THP_sample==1) %&gt;%
  select( treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline) %&gt;%
  pivot_longer(cols = -treat, names_to = "variable", values_to = "value") %&gt;%
  group_nest(variable) %&gt;%
  mutate(t.test = map(data, ~tidy(t.test(value ~ treat, data = .x)))) %&gt;%
  unnest(t.test) %&gt;%
  mutate( Mean_Treatment = round(estimate2, 2),
          Mean_Kontrolle = round(estimate1, 2),
    Differenz = -round(estimate, 2),
          Signifikanz = round(p.value,2)) %&gt;%
  select( Mean_Treatment, Mean_Kontrolle, Differenz, Signifikanz) -&gt; total

*rownames(total) &lt;- c("Alter der Mutter", "Depressiv (1 Jahr)", "Bildung des Vaters", "Vater beschäftigt", "Mutter beschäftigt", "Erstes Kind", "Anzahl der Kinder", "Oma im Haus", "Stiefoma im Haus")
```
]
 
.panel2-balancing-auto[

]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
  filter(THP_sample==1) %&gt;%
  select( treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline) %&gt;%
  pivot_longer(cols = -treat, names_to = "variable", values_to = "value") %&gt;%
  group_nest(variable) %&gt;%
  mutate(t.test = map(data, ~tidy(t.test(value ~ treat, data = .x)))) %&gt;%
  unnest(t.test) %&gt;%
  mutate( Mean_Treatment = round(estimate2, 2),
          Mean_Kontrolle = round(estimate1, 2),
    Differenz = -round(estimate, 2),
          Signifikanz = round(p.value,2)) %&gt;%
  select( Mean_Treatment, Mean_Kontrolle, Differenz, Signifikanz) -&gt; total

rownames(total) &lt;- c("Alter der Mutter", "Depressiv (1 Jahr)", "Bildung des Vaters", "Vater beschäftigt", "Mutter beschäftigt", "Erstes Kind", "Anzahl der Kinder", "Oma im Haus", "Stiefoma im Haus")

*total
```
]
 
.panel2-balancing-auto[

```
# A tibble: 9 × 4
  Mean_Treatment Mean_Kontrolle Differenz Signifikanz
*          &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;
1           0.47           0.4       0.06        0.05
2          26.5           27        -0.51        0.14
3           0.27           0.59     -0.32        0   
4           6.95           7.09     -0.13        0.61
5           0.9            0.91     -0.01        0.53
6           0.02           0.03     -0.01        0.26
7           0.19           0.19      0.01        0.82
8           2.16           2.33     -0.17        0.15
9           0.08           0.05      0.03        0.07
```
]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
  filter(THP_sample==1) %&gt;%
  select( treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline) %&gt;%
  pivot_longer(cols = -treat, names_to = "variable", values_to = "value") %&gt;%
  group_nest(variable) %&gt;%
  mutate(t.test = map(data, ~tidy(t.test(value ~ treat, data = .x)))) %&gt;%
  unnest(t.test) %&gt;%
  mutate( Mean_Treatment = round(estimate2, 2),
          Mean_Kontrolle = round(estimate1, 2),
    Differenz = -round(estimate, 2),
          Signifikanz = round(p.value,2)) %&gt;%
  select( Mean_Treatment, Mean_Kontrolle, Differenz, Signifikanz) -&gt; total

rownames(total) &lt;- c("Alter der Mutter", "Depressiv (1 Jahr)", "Bildung des Vaters", "Vater beschäftigt", "Mutter beschäftigt", "Erstes Kind", "Anzahl der Kinder", "Oma im Haus", "Stiefoma im Haus")

total %&gt;%
* kbl(col.names = c("Treatment", "Kontrolle","Differenz","p-Wert"), digits = 2, format = "html",
*     caption = "Balancing Tabelle für die Grundcharakteristika")
```
]
 
.panel2-balancing-auto[
&lt;table&gt;
&lt;caption&gt;Balancing Tabelle für die Grundcharakteristika&lt;/caption&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Treatment &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Kontrolle &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Differenz &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p-Wert &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.47 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.40 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.06 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.05 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 26.49 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.51 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.59 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.32 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 6.95 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.09 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.61 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.91 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.53 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.26 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.82 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2.16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.33 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.15 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.05 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.07 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
  filter(THP_sample==1) %&gt;%
  select( treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline) %&gt;%
  pivot_longer(cols = -treat, names_to = "variable", values_to = "value") %&gt;%
  group_nest(variable) %&gt;%
  mutate(t.test = map(data, ~tidy(t.test(value ~ treat, data = .x)))) %&gt;%
  unnest(t.test) %&gt;%
  mutate( Mean_Treatment = round(estimate2, 2),
          Mean_Kontrolle = round(estimate1, 2),
    Differenz = -round(estimate, 2),
          Signifikanz = round(p.value,2)) %&gt;%
  select( Mean_Treatment, Mean_Kontrolle, Differenz, Signifikanz) -&gt; total

rownames(total) &lt;- c("Alter der Mutter", "Depressiv (1 Jahr)", "Bildung des Vaters", "Vater beschäftigt", "Mutter beschäftigt", "Erstes Kind", "Anzahl der Kinder", "Oma im Haus", "Stiefoma im Haus")

total %&gt;%
  kbl(col.names = c("Treatment", "Kontrolle","Differenz","p-Wert"), digits = 2, format = "html",
      caption = "Balancing Tabelle für die Grundcharakteristika") %&gt;%
* kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```
]
 
.panel2-balancing-auto[
&lt;table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;"&gt;
&lt;caption&gt;Balancing Tabelle für die Grundcharakteristika&lt;/caption&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Treatment &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Kontrolle &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Differenz &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p-Wert &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.47 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.40 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.06 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.05 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 26.49 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.51 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.59 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.32 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 6.95 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.09 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.61 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.91 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.53 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.26 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.82 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2.16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.33 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.15 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.05 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.07 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
  filter(THP_sample==1) %&gt;%
  select( treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline) %&gt;%
  pivot_longer(cols = -treat, names_to = "variable", values_to = "value") %&gt;%
  group_nest(variable) %&gt;%
  mutate(t.test = map(data, ~tidy(t.test(value ~ treat, data = .x)))) %&gt;%
  unnest(t.test) %&gt;%
  mutate( Mean_Treatment = round(estimate2, 2),
          Mean_Kontrolle = round(estimate1, 2),
    Differenz = -round(estimate, 2),
          Signifikanz = round(p.value,2)) %&gt;%
  select( Mean_Treatment, Mean_Kontrolle, Differenz, Signifikanz) -&gt; total

rownames(total) &lt;- c("Alter der Mutter", "Depressiv (1 Jahr)", "Bildung des Vaters", "Vater beschäftigt", "Mutter beschäftigt", "Erstes Kind", "Anzahl der Kinder", "Oma im Haus", "Stiefoma im Haus")

total %&gt;%
  kbl(col.names = c("Treatment", "Kontrolle","Differenz","p-Wert"), digits = 2, format = "html",
      caption = "Balancing Tabelle für die Grundcharakteristika") %&gt;%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %&gt;%
* kable_paper(full_width = F)
```
]
 
.panel2-balancing-auto[
&lt;table class="table table-striped table-hover table-condensed table-responsive lightable-paper" style='margin-left: auto; margin-right: auto; font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'&gt;
&lt;caption&gt;Balancing Tabelle für die Grundcharakteristika&lt;/caption&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Treatment &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Kontrolle &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Differenz &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p-Wert &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.47 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.40 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.06 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.05 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 26.49 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.51 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.59 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.32 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 6.95 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.09 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.61 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.91 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.53 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.26 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.82 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2.16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.33 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.15 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.05 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.07 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
  filter(THP_sample==1) %&gt;%
  select( treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline) %&gt;%
  pivot_longer(cols = -treat, names_to = "variable", values_to = "value") %&gt;%
  group_nest(variable) %&gt;%
  mutate(t.test = map(data, ~tidy(t.test(value ~ treat, data = .x)))) %&gt;%
  unnest(t.test) %&gt;%
  mutate( Mean_Treatment = round(estimate2, 2),
          Mean_Kontrolle = round(estimate1, 2),
    Differenz = -round(estimate, 2),
          Signifikanz = round(p.value,2)) %&gt;%
  select( Mean_Treatment, Mean_Kontrolle, Differenz, Signifikanz) -&gt; total

rownames(total) &lt;- c("Alter der Mutter", "Depressiv (1 Jahr)", "Bildung des Vaters", "Vater beschäftigt", "Mutter beschäftigt", "Erstes Kind", "Anzahl der Kinder", "Oma im Haus", "Stiefoma im Haus")

total %&gt;%
  kbl(col.names = c("Treatment", "Kontrolle","Differenz","p-Wert"), digits = 2, format = "html",
      caption = "Balancing Tabelle für die Grundcharakteristika") %&gt;%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %&gt;%
  kable_paper(full_width = F)  %&gt;%
* add_header_above(c(" ", "Stichprobe Baseline (N = 903)" = 3))
```
]
 
.panel2-balancing-auto[
&lt;table class="table table-striped table-hover table-condensed table-responsive lightable-paper" style='margin-left: auto; margin-right: auto; font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'&gt;
&lt;caption&gt;Balancing Tabelle für die Grundcharakteristika&lt;/caption&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"&gt;&lt;div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; "&gt;Stichprobe Baseline (N = 903)&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Treatment &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Kontrolle &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Differenz &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p-Wert &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.47 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.40 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.06 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.05 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 26.49 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.51 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.59 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.32 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 6.95 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.09 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.61 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.91 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.53 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.26 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.82 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2.16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.33 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.15 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.05 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.07 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
  filter(THP_sample==1) %&gt;%
  select( treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline) %&gt;%
  pivot_longer(cols = -treat, names_to = "variable", values_to = "value") %&gt;%
  group_nest(variable) %&gt;%
  mutate(t.test = map(data, ~tidy(t.test(value ~ treat, data = .x)))) %&gt;%
  unnest(t.test) %&gt;%
  mutate( Mean_Treatment = round(estimate2, 2),
          Mean_Kontrolle = round(estimate1, 2),
    Differenz = -round(estimate, 2),
          Signifikanz = round(p.value,2)) %&gt;%
  select( Mean_Treatment, Mean_Kontrolle, Differenz, Signifikanz) -&gt; total

rownames(total) &lt;- c("Alter der Mutter", "Depressiv (1 Jahr)", "Bildung des Vaters", "Vater beschäftigt", "Mutter beschäftigt", "Erstes Kind", "Anzahl der Kinder", "Oma im Haus", "Stiefoma im Haus")

total %&gt;%
  kbl(col.names = c("Treatment", "Kontrolle","Differenz","p-Wert"), digits = 2, format = "html",
      caption = "Balancing Tabelle für die Grundcharakteristika") %&gt;%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %&gt;%
  kable_paper(full_width = F)  %&gt;%
  add_header_above(c(" ", "Stichprobe Baseline (N = 903)" = 3)) %&gt;%
* footnote(general = "Diese Tabelle testet, wie ausbalanciert die Beobachtungen in der Baseline Stichprobe sind. In den ersten beiden Spalten wird der Mittelwert für die Treatment bzw. Kontrollgruppe für die Baseline Stichprobe gezeigt. Spalte (3) zeigen die Differenz zwischen den Mittelwerten der Treatment und Kontrollgruppe für die jeweilige Stichprobe und die Spalte (4) zeigt die p-Werte und damit ob die einzelnen Mittelwerte statistisch signifikant unterschiedlich voneinander sind.")
```
]
 
.panel2-balancing-auto[
&lt;table class="table table-striped table-hover table-condensed table-responsive lightable-paper" style='margin-left: auto; margin-right: auto; font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;border-bottom: 0;'&gt;
&lt;caption&gt;Balancing Tabelle für die Grundcharakteristika&lt;/caption&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"&gt;&lt;div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; "&gt;Stichprobe Baseline (N = 903)&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Treatment &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Kontrolle &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Differenz &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p-Wert &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.47 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.40 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.06 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.05 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 26.49 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.51 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.59 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.32 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 6.95 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.09 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.61 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.91 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.53 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.26 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.82 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2.16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.33 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.15 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.05 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.07 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;
&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;&lt;span style="font-style: italic;"&gt;Note: &lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; Diese Tabelle testet, wie ausbalanciert die Beobachtungen in der Baseline Stichprobe sind. In den ersten beiden Spalten wird der Mittelwert für die Treatment bzw. Kontrollgruppe für die Baseline Stichprobe gezeigt. Spalte (3) zeigen die Differenz zwischen den Mittelwerten der Treatment und Kontrollgruppe für die jeweilige Stichprobe und die Spalte (4) zeigt die p-Werte und damit ob die einzelnen Mittelwerte statistisch signifikant unterschiedlich voneinander sind.&lt;/td&gt;&lt;/tr&gt;
&lt;/tfoot&gt;
&lt;/table&gt;
]

---
count: false
 

.panel1-balancing-auto[

```r
thp %&gt;%
  filter(THP_sample==1) %&gt;%
  select( treat, depressed_1y, age_baseline, kids_no, first_child, employed_mo_baseline, MIL, maternalgma, edu_fa_baseline, employed_fa_baseline) %&gt;%
  pivot_longer(cols = -treat, names_to = "variable", values_to = "value") %&gt;%
  group_nest(variable) %&gt;%
  mutate(t.test = map(data, ~tidy(t.test(value ~ treat, data = .x)))) %&gt;%
  unnest(t.test) %&gt;%
  mutate( Mean_Treatment = round(estimate2, 2),
          Mean_Kontrolle = round(estimate1, 2),
    Differenz = -round(estimate, 2),
          Signifikanz = round(p.value,2)) %&gt;%
  select( Mean_Treatment, Mean_Kontrolle, Differenz, Signifikanz) -&gt; total

rownames(total) &lt;- c("Alter der Mutter", "Depressiv (1 Jahr)", "Bildung des Vaters", "Vater beschäftigt", "Mutter beschäftigt", "Erstes Kind", "Anzahl der Kinder", "Oma im Haus", "Stiefoma im Haus")

total %&gt;%
  kbl(col.names = c("Treatment", "Kontrolle","Differenz","p-Wert"), digits = 2, format = "html",
      caption = "Balancing Tabelle für die Grundcharakteristika") %&gt;%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %&gt;%
  kable_paper(full_width = F)  %&gt;%
  add_header_above(c(" ", "Stichprobe Baseline (N = 903)" = 3)) %&gt;%
  footnote(general = "Diese Tabelle testet, wie ausbalanciert die Beobachtungen in der Baseline Stichprobe sind. In den ersten beiden Spalten wird der Mittelwert für die Treatment bzw. Kontrollgruppe für die Baseline Stichprobe gezeigt. Spalte (3) zeigen die Differenz zwischen den Mittelwerten der Treatment und Kontrollgruppe für die jeweilige Stichprobe und die Spalte (4) zeigt die p-Werte und damit ob die einzelnen Mittelwerte statistisch signifikant unterschiedlich voneinander sind.")
```
]
 
.panel2-balancing-auto[
&lt;table class="table table-striped table-hover table-condensed table-responsive lightable-paper" style='margin-left: auto; margin-right: auto; font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;border-bottom: 0;'&gt;
&lt;caption&gt;Balancing Tabelle für die Grundcharakteristika&lt;/caption&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"&gt;&lt;div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; "&gt;Stichprobe Baseline (N = 903)&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Treatment &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Kontrolle &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Differenz &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p-Wert &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.47 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.40 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.06 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.05 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 26.49 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.51 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.59 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.32 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 6.95 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.09 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.61 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.91 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.53 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.26 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.82 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2.16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.33 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.15 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.05 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.07 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;
&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;&lt;span style="font-style: italic;"&gt;Note: &lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; Diese Tabelle testet, wie ausbalanciert die Beobachtungen in der Baseline Stichprobe sind. In den ersten beiden Spalten wird der Mittelwert für die Treatment bzw. Kontrollgruppe für die Baseline Stichprobe gezeigt. Spalte (3) zeigen die Differenz zwischen den Mittelwerten der Treatment und Kontrollgruppe für die jeweilige Stichprobe und die Spalte (4) zeigt die p-Werte und damit ob die einzelnen Mittelwerte statistisch signifikant unterschiedlich voneinander sind.&lt;/td&gt;&lt;/tr&gt;
&lt;/tfoot&gt;
&lt;/table&gt;
]

&lt;style&gt;
.panel1-balancing-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-balancing-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-balancing-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;






---

## Schritt 1: Unterschiede untersuchen

&lt;table class="table table-striped table-hover table-condensed table-responsive lightable-paper" style='margin-left: auto; margin-right: auto; font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;border-bottom: 0;'&gt;
&lt;caption&gt;Balancing Tabelle für die Grundcharakteristika&lt;/caption&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"&gt;&lt;div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; "&gt;Stichprobe Baseline (N = 903)&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Treatment &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Kontrolle &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Differenz &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p-Wert &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.47 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.40 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.06 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.05 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 26.49 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.51 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.59 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.32 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 6.95 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.09 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.61 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.91 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.53 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.26 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.82 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2.16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.33 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.15 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.05 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.07 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;
&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;&lt;span style="font-style: italic;"&gt;Note: &lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; Diese Tabelle testet, wie ausbalanciert die Beobachtungen in der Baseline Stichprobe sind. In den ersten beiden Spalten wird der Mittelwert für die Treatment bzw. Kontrollgruppe für die Baseline Stichprobe gezeigt. Spalte (3) zeigen die Differenz zwischen den Mittelwerten der Treatment und Kontrollgruppe für die jeweilige Stichprobe und die Spalte (4) zeigt die p-Werte und damit ob die einzelnen Mittelwerte statistisch signifikant unterschiedlich voneinander sind.&lt;/td&gt;&lt;/tr&gt;
&lt;/tfoot&gt;
&lt;/table&gt;

---

## Schritt 1: Unterschiede untersuchen

**Wann nutzt uns eine solche Balancing Tabelle?**

Wir sollten eine solche Tabelle immer dann erstellen, wenn wir uns nicht ganz sicher sein können, ob unsere Randomisierung erfolgreich war, d.h. insbesondere bei der Untersuchung von Feldexperimenten. 

- Wenn wir die Randomisierung nicht selbst durchgeführt haben, insbesondere in Feldexperimenten
- Bei _Attrition_, d.h. Schwund bei den Teilnehmern des Experiments

---

## Schritt 1: Unterschiede untersuchen

.question[Was lernen wir aus der Balancing Tabelle?]

Aus dieser Balancing Tabelle lernen wir mehrere Dinge:

- In den meisten Grundcharakteristika unterscheiden sich Treatment und Kontrollgruppe **nicht** voneinander.
- Einige Variablen sind jedoch signifikant unterschiedlich zwischen Treatment und Kontrollgruppe, insbesondere ob die Oma väterlicherseits oder mütterlicherseits mit im Haushalt lebt.
- Wir verlieren einige Teilnehmer über die Zeit (903 -&gt; 704 -&gt; 585 Beobachtungen), d.h. wir haben nach 7 Jahren nur noch 64,8% der Mütter, die ursprünglich am Experiment teilgenommen haben, in der Stichprobe.

---

## Schritt 2: Durchschnittliche Differenzen

count: false
 

.panel1-depressionen-auto[

```r
*thp
```
]
 
.panel2-depressionen-auto[

```
# A tibble: 1,203 × 394
   newid interviewer    uc grandmother employed_mo income_mo income_hh genhealth
   &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    
 1    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 2   226           1     1 No          No                  0 60        Very good
 3   222           6     1 Yes         No                  0 200       Moderate 
 4     3           1     1 No          No                  0 150       Good     
 5   217           3     1 No          No                  0 250       0        
 6   354           1     1 Yes         No                  0 110       Very good
 7    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 8    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 9   225           4     1 No          No                  0 60        Very good
10     2           4     1 Yes         No                  0 60        Good     
# ℹ 1,193 more rows
# ℹ 386 more variables: edu_mo &lt;dbl&gt;, edu_fa &lt;dbl&gt;, ideal_no_kids &lt;chr&gt;,
#   no_kids_over5_dead &lt;dbl&gt;, no_kids_1_5_dead &lt;dbl&gt;, no_kids_less1_dead &lt;dbl&gt;,
#   mo_185 &lt;chr&gt;, mo_358 &lt;chr&gt;, mo_360 &lt;chr&gt;, c_wt &lt;dbl&gt;, c_ht &lt;dbl&gt;,
#   ch_27 &lt;chr&gt;, ch_28 &lt;chr&gt;, ch_29 &lt;chr&gt;, ch_30 &lt;chr&gt;, ch_31 &lt;chr&gt;,
#   ch_32 &lt;chr&gt;, ch_33 &lt;chr&gt;, ch_34 &lt;chr&gt;, ch_35 &lt;chr&gt;, ch_36 &lt;chr&gt;,
#   mo_ht &lt;dbl&gt;, mo_bmi &lt;dbl&gt;, hamd_baseline &lt;dbl&gt;, bdq_baseline &lt;dbl&gt;, …
```
]

---
count: false
 

.panel1-depressionen-auto[

```r
thp %&gt;%
* select(treat, depressed_6m, depressed_1y, depressed)
```
]
 
.panel2-depressionen-auto[

```
# A tibble: 1,203 × 4
   treat depressed_6m depressed_1y depressed
   &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;
 1     1            0            1        NA
 2     1            0            0         0
 3     1           NA           NA         0
 4     1            0            0         0
 5     1           NA           NA         0
 6     1            1            1         0
 7     1            1            1        NA
 8     1            0            0        NA
 9     1            0            0         0
10     1            0            0         0
# ℹ 1,193 more rows
```
]

---
count: false
 

.panel1-depressionen-auto[

```r
thp %&gt;%
  select(treat, depressed_6m, depressed_1y, depressed) %&gt;%
* mutate(Baseline = 1)
```
]
 
.panel2-depressionen-auto[

```
# A tibble: 1,203 × 5
   treat depressed_6m depressed_1y depressed Baseline
   &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1     1            0            1        NA        1
 2     1            0            0         0        1
 3     1           NA           NA         0        1
 4     1            0            0         0        1
 5     1           NA           NA         0        1
 6     1            1            1         0        1
 7     1            1            1        NA        1
 8     1            0            0        NA        1
 9     1            0            0         0        1
10     1            0            0         0        1
# ℹ 1,193 more rows
```
]

---
count: false
 

.panel1-depressionen-auto[

```r
thp %&gt;%
  select(treat, depressed_6m, depressed_1y, depressed) %&gt;%
  mutate(Baseline = 1) %&gt;%
* pivot_longer( cols = -treat, names_to = "name", values_to = "depression")
```
]
 
.panel2-depressionen-auto[

```
# A tibble: 4,812 × 3
   treat name         depression
   &lt;dbl&gt; &lt;chr&gt;             &lt;dbl&gt;
 1     1 depressed_6m          0
 2     1 depressed_1y          1
 3     1 depressed            NA
 4     1 Baseline              1
 5     1 depressed_6m          0
 6     1 depressed_1y          0
 7     1 depressed             0
 8     1 Baseline              1
 9     1 depressed_6m         NA
10     1 depressed_1y         NA
# ℹ 4,802 more rows
```
]

---
count: false
 

.panel1-depressionen-auto[

```r
thp %&gt;%
  select(treat, depressed_6m, depressed_1y, depressed) %&gt;%
  mutate(Baseline = 1) %&gt;%
  pivot_longer( cols = -treat, names_to = "name", values_to = "depression") %&gt;%
* mutate(name = fct_relevel(name, "Baseline", "depressed_6m", "depressed_1y", "depressed"),
*        name = fct_recode(name,
*                          "6 Monate" = "depressed_6m",
*                          "1 Jahr" = "depressed_1y",
*                          "7 Jahre" = "depressed"),
*        treat_factor = as.factor(ifelse(treat == 1, "Treatment", "Kontrolle")))
```
]
 
.panel2-depressionen-auto[

```
# A tibble: 4,812 × 4
   treat name     depression treat_factor
   &lt;dbl&gt; &lt;fct&gt;         &lt;dbl&gt; &lt;fct&gt;       
 1     1 6 Monate          0 Treatment   
 2     1 1 Jahr            1 Treatment   
 3     1 7 Jahre          NA Treatment   
 4     1 Baseline          1 Treatment   
 5     1 6 Monate          0 Treatment   
 6     1 1 Jahr            0 Treatment   
 7     1 7 Jahre           0 Treatment   
 8     1 Baseline          1 Treatment   
 9     1 6 Monate         NA Treatment   
10     1 1 Jahr           NA Treatment   
# ℹ 4,802 more rows
```
]

---
count: false
 

.panel1-depressionen-auto[

```r
thp %&gt;%
  select(treat, depressed_6m, depressed_1y, depressed) %&gt;%
  mutate(Baseline = 1) %&gt;%
  pivot_longer( cols = -treat, names_to = "name", values_to = "depression") %&gt;%
  mutate(name = fct_relevel(name, "Baseline", "depressed_6m", "depressed_1y", "depressed"),
         name = fct_recode(name,
                           "6 Monate" = "depressed_6m",
                           "1 Jahr" = "depressed_1y",
                           "7 Jahre" = "depressed"),
         treat_factor = as.factor(ifelse(treat == 1, "Treatment", "Kontrolle"))) %&gt;%
* ggplot(aes(x = name, y = depression,
*            color = treat_factor))
```
]
 
.panel2-depressionen-auto[
&lt;img src="Experiment_slides_files/figure-html/depressionen_auto_06_output-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---
count: false
 

.panel1-depressionen-auto[

```r
thp %&gt;%
  select(treat, depressed_6m, depressed_1y, depressed) %&gt;%
  mutate(Baseline = 1) %&gt;%
  pivot_longer( cols = -treat, names_to = "name", values_to = "depression") %&gt;%
  mutate(name = fct_relevel(name, "Baseline", "depressed_6m", "depressed_1y", "depressed"),
         name = fct_recode(name,
                           "6 Monate" = "depressed_6m",
                           "1 Jahr" = "depressed_1y",
                           "7 Jahre" = "depressed"),
         treat_factor = as.factor(ifelse(treat == 1, "Treatment", "Kontrolle"))) %&gt;%
  ggplot(aes(x = name, y = depression,
             color = treat_factor)) +
* scale_color_manual(values = c("#D55E00", "#0072B2"))
```
]
 
.panel2-depressionen-auto[
&lt;img src="Experiment_slides_files/figure-html/depressionen_auto_07_output-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---
count: false
 

.panel1-depressionen-auto[

```r
thp %&gt;%
  select(treat, depressed_6m, depressed_1y, depressed) %&gt;%
  mutate(Baseline = 1) %&gt;%
  pivot_longer( cols = -treat, names_to = "name", values_to = "depression") %&gt;%
  mutate(name = fct_relevel(name, "Baseline", "depressed_6m", "depressed_1y", "depressed"),
         name = fct_recode(name,
                           "6 Monate" = "depressed_6m",
                           "1 Jahr" = "depressed_1y",
                           "7 Jahre" = "depressed"),
         treat_factor = as.factor(ifelse(treat == 1, "Treatment", "Kontrolle"))) %&gt;%
  ggplot(aes(x = name, y = depression,
             color = treat_factor)) +
  scale_color_manual(values = c("#D55E00", "#0072B2")) +
* stat_summary(geom = "pointrange",
*              fun.data = "mean_se",
*              fun.args = list(mult=2.33))
```
]
 
.panel2-depressionen-auto[
&lt;img src="Experiment_slides_files/figure-html/depressionen_auto_08_output-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---
count: false
 

.panel1-depressionen-auto[

```r
thp %&gt;%
  select(treat, depressed_6m, depressed_1y, depressed) %&gt;%
  mutate(Baseline = 1) %&gt;%
  pivot_longer( cols = -treat, names_to = "name", values_to = "depression") %&gt;%
  mutate(name = fct_relevel(name, "Baseline", "depressed_6m", "depressed_1y", "depressed"),
         name = fct_recode(name,
                           "6 Monate" = "depressed_6m",
                           "1 Jahr" = "depressed_1y",
                           "7 Jahre" = "depressed"),
         treat_factor = as.factor(ifelse(treat == 1, "Treatment", "Kontrolle"))) %&gt;%
  ggplot(aes(x = name, y = depression,
             color = treat_factor)) +
  scale_color_manual(values = c("#D55E00", "#0072B2")) +
  stat_summary(geom = "pointrange",
               fun.data = "mean_se",
               fun.args = list(mult=2.33)) +
* ylim(0,1)
```
]
 
.panel2-depressionen-auto[
&lt;img src="Experiment_slides_files/figure-html/depressionen_auto_09_output-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---
count: false
 

.panel1-depressionen-auto[

```r
thp %&gt;%
  select(treat, depressed_6m, depressed_1y, depressed) %&gt;%
  mutate(Baseline = 1) %&gt;%
  pivot_longer( cols = -treat, names_to = "name", values_to = "depression") %&gt;%
  mutate(name = fct_relevel(name, "Baseline", "depressed_6m", "depressed_1y", "depressed"),
         name = fct_recode(name,
                           "6 Monate" = "depressed_6m",
                           "1 Jahr" = "depressed_1y",
                           "7 Jahre" = "depressed"),
         treat_factor = as.factor(ifelse(treat == 1, "Treatment", "Kontrolle"))) %&gt;%
  ggplot(aes(x = name, y = depression,
             color = treat_factor)) +
  scale_color_manual(values = c("#D55E00", "#0072B2")) +
  stat_summary(geom = "pointrange",
               fun.data = "mean_se",
               fun.args = list(mult=2.33)) +
  ylim(0,1) +
* theme_minimal()
```
]
 
.panel2-depressionen-auto[
&lt;img src="Experiment_slides_files/figure-html/depressionen_auto_10_output-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---
count: false
 

.panel1-depressionen-auto[

```r
thp %&gt;%
  select(treat, depressed_6m, depressed_1y, depressed) %&gt;%
  mutate(Baseline = 1) %&gt;%
  pivot_longer( cols = -treat, names_to = "name", values_to = "depression") %&gt;%
  mutate(name = fct_relevel(name, "Baseline", "depressed_6m", "depressed_1y", "depressed"),
         name = fct_recode(name,
                           "6 Monate" = "depressed_6m",
                           "1 Jahr" = "depressed_1y",
                           "7 Jahre" = "depressed"),
         treat_factor = as.factor(ifelse(treat == 1, "Treatment", "Kontrolle"))) %&gt;%
  ggplot(aes(x = name, y = depression,
             color = treat_factor)) +
  scale_color_manual(values = c("#D55E00", "#0072B2")) +
  stat_summary(geom = "pointrange",
               fun.data = "mean_se",
               fun.args = list(mult=2.33)) +
  ylim(0,1) +
  theme_minimal() +
* theme(legend.title = element_blank(),
*       legend.position = "bottom")
```
]
 
.panel2-depressionen-auto[
&lt;img src="Experiment_slides_files/figure-html/depressionen_auto_11_output-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---
count: false
 

.panel1-depressionen-auto[

```r
thp %&gt;%
  select(treat, depressed_6m, depressed_1y, depressed) %&gt;%
  mutate(Baseline = 1) %&gt;%
  pivot_longer( cols = -treat, names_to = "name", values_to = "depression") %&gt;%
  mutate(name = fct_relevel(name, "Baseline", "depressed_6m", "depressed_1y", "depressed"),
         name = fct_recode(name,
                           "6 Monate" = "depressed_6m",
                           "1 Jahr" = "depressed_1y",
                           "7 Jahre" = "depressed"),
         treat_factor = as.factor(ifelse(treat == 1, "Treatment", "Kontrolle"))) %&gt;%
  ggplot(aes(x = name, y = depression,
             color = treat_factor)) +
  scale_color_manual(values = c("#D55E00", "#0072B2")) +
  stat_summary(geom = "pointrange",
               fun.data = "mean_se",
               fun.args = list(mult=2.33)) +
  ylim(0,1) +
  theme_minimal() +
  theme(legend.title = element_blank(),
        legend.position = "bottom") +
* labs(x = NULL,
*      y = "Anteil an Depressionen",
*      title = "Treatment Effekte auf den Anteil an Depressionen",
*      caption = "Gezeigt wird der Mittelwert der Gruppen inklusive des 99% Konfidenzintervalls.\nEigene Analysen auf Basis von Baranov et al. (2020)")
```
]
 
.panel2-depressionen-auto[
&lt;img src="Experiment_slides_files/figure-html/depressionen_auto_12_output-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---
count: false
 

.panel1-depressionen-auto[

```r
thp %&gt;%
  select(treat, depressed_6m, depressed_1y, depressed) %&gt;%
  mutate(Baseline = 1) %&gt;%
  pivot_longer( cols = -treat, names_to = "name", values_to = "depression") %&gt;%
  mutate(name = fct_relevel(name, "Baseline", "depressed_6m", "depressed_1y", "depressed"),
         name = fct_recode(name,
                           "6 Monate" = "depressed_6m",
                           "1 Jahr" = "depressed_1y",
                           "7 Jahre" = "depressed"),
         treat_factor = as.factor(ifelse(treat == 1, "Treatment", "Kontrolle"))) %&gt;%
  ggplot(aes(x = name, y = depression,
             color = treat_factor)) +
  scale_color_manual(values = c("#D55E00", "#0072B2")) +
  stat_summary(geom = "pointrange",
               fun.data = "mean_se",
               fun.args = list(mult=2.33)) +
  ylim(0,1) +
  theme_minimal() +
  theme(legend.title = element_blank(),
        legend.position = "bottom") +
  labs(x = NULL,
       y = "Anteil an Depressionen",
       title = "Treatment Effekte auf den Anteil an Depressionen",
       caption = "Gezeigt wird der Mittelwert der Gruppen inklusive des 99% Konfidenzintervalls.\nEigene Analysen auf Basis von Baranov et al. (2020)")
```
]
 
.panel2-depressionen-auto[
&lt;img src="Experiment_slides_files/figure-html/depressionen_auto_13_output-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

&lt;style&gt;
.panel1-depressionen-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-depressionen-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-depressionen-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

## Schritt 2: Durchschnittliche Differenzen

.pull-left[
&lt;img src="Experiment_slides_files/figure-html/unnamed-chunk-5-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
- Die Treatmentgruppe hat einen sehr raschen Rückgang bei den Depressionen
    - Bereits nach 6 Monaten auf rund 25%
    - Stagniert auf rund 25% auch nach einem Jahr
    - Geht zurück auf unter 20% nach sieben Jahren
- Die Kontrollgruppe verzeichnet auch einen starken Rückgang der Depressionen 
    - Nach 6 Monaten auf etwas mehr als 50%
    - Stagniert bei etwas über 50% auch nach einem Jahr
    - Geht zurück auf rund 25% nach sieben Jahren
]

--

.alert[Ein naiver Vergleich nur innerhalb der Treatmentgruppe vorher/nachher würde den Effekt des Treatments stark überschätzen!]

---

class: inverse, center, middle

# Regressionsanalysen

---

## Schritt 2: Durchschnittliche Differenzen

count: false
 

.panel1-diffs-auto[

```r
*thp
```
]
 
.panel2-diffs-auto[

```
# A tibble: 1,203 × 394
   newid interviewer    uc grandmother employed_mo income_mo income_hh genhealth
   &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    
 1    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 2   226           1     1 No          No                  0 60        Very good
 3   222           6     1 Yes         No                  0 200       Moderate 
 4     3           1     1 No          No                  0 150       Good     
 5   217           3     1 No          No                  0 250       0        
 6   354           1     1 Yes         No                  0 110       Very good
 7    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 8    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 9   225           4     1 No          No                  0 60        Very good
10     2           4     1 Yes         No                  0 60        Good     
# ℹ 1,193 more rows
# ℹ 386 more variables: edu_mo &lt;dbl&gt;, edu_fa &lt;dbl&gt;, ideal_no_kids &lt;chr&gt;,
#   no_kids_over5_dead &lt;dbl&gt;, no_kids_1_5_dead &lt;dbl&gt;, no_kids_less1_dead &lt;dbl&gt;,
#   mo_185 &lt;chr&gt;, mo_358 &lt;chr&gt;, mo_360 &lt;chr&gt;, c_wt &lt;dbl&gt;, c_ht &lt;dbl&gt;,
#   ch_27 &lt;chr&gt;, ch_28 &lt;chr&gt;, ch_29 &lt;chr&gt;, ch_30 &lt;chr&gt;, ch_31 &lt;chr&gt;,
#   ch_32 &lt;chr&gt;, ch_33 &lt;chr&gt;, ch_34 &lt;chr&gt;, ch_35 &lt;chr&gt;, ch_36 &lt;chr&gt;,
#   mo_ht &lt;dbl&gt;, mo_bmi &lt;dbl&gt;, hamd_baseline &lt;dbl&gt;, bdq_baseline &lt;dbl&gt;, …
```
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
* filter(attrit2 == 0 &amp; THP_sample == 1)
```
]
 
.panel2-diffs-auto[

```
# A tibble: 585 × 394
   newid interviewer    uc grandmother employed_mo income_mo income_hh genhealth
   &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    
 1   226           1     1 No          No                  0 60        Very good
 2     3           1     1 No          No                  0 150       Good     
 3   354           1     1 Yes         No                  0 110       Very good
 4   225           4     1 No          No                  0 60        Very good
 5     2           4     1 Yes         No                  0 60        Good     
 6   729           1     1 No          No                  0 65        Good     
 7   228           4     1 No          No                  0 300       0        
 8   180           4     1 No          No                  0 &lt;NA&gt;      Very good
 9   178           1     1 No          No                  0 60        Good     
10   224           7     1 Yes         No                  0 150       Good     
# ℹ 575 more rows
# ℹ 386 more variables: edu_mo &lt;dbl&gt;, edu_fa &lt;dbl&gt;, ideal_no_kids &lt;chr&gt;,
#   no_kids_over5_dead &lt;dbl&gt;, no_kids_1_5_dead &lt;dbl&gt;, no_kids_less1_dead &lt;dbl&gt;,
#   mo_185 &lt;chr&gt;, mo_358 &lt;chr&gt;, mo_360 &lt;chr&gt;, c_wt &lt;dbl&gt;, c_ht &lt;dbl&gt;,
#   ch_27 &lt;chr&gt;, ch_28 &lt;chr&gt;, ch_29 &lt;chr&gt;, ch_30 &lt;chr&gt;, ch_31 &lt;chr&gt;,
#   ch_32 &lt;chr&gt;, ch_33 &lt;chr&gt;, ch_34 &lt;chr&gt;, ch_35 &lt;chr&gt;, ch_36 &lt;chr&gt;,
#   mo_ht &lt;dbl&gt;, mo_bmi &lt;dbl&gt;, hamd_baseline &lt;dbl&gt;, bdq_baseline &lt;dbl&gt;, …
```
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
* group_by(treat)
```
]
 
.panel2-diffs-auto[

```
# A tibble: 585 × 394
# Groups:   treat [2]
   newid interviewer    uc grandmother employed_mo income_mo income_hh genhealth
   &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    
 1   226           1     1 No          No                  0 60        Very good
 2     3           1     1 No          No                  0 150       Good     
 3   354           1     1 Yes         No                  0 110       Very good
 4   225           4     1 No          No                  0 60        Very good
 5     2           4     1 Yes         No                  0 60        Good     
 6   729           1     1 No          No                  0 65        Good     
 7   228           4     1 No          No                  0 300       0        
 8   180           4     1 No          No                  0 &lt;NA&gt;      Very good
 9   178           1     1 No          No                  0 60        Good     
10   224           7     1 Yes         No                  0 150       Good     
# ℹ 575 more rows
# ℹ 386 more variables: edu_mo &lt;dbl&gt;, edu_fa &lt;dbl&gt;, ideal_no_kids &lt;chr&gt;,
#   no_kids_over5_dead &lt;dbl&gt;, no_kids_1_5_dead &lt;dbl&gt;, no_kids_less1_dead &lt;dbl&gt;,
#   mo_185 &lt;chr&gt;, mo_358 &lt;chr&gt;, mo_360 &lt;chr&gt;, c_wt &lt;dbl&gt;, c_ht &lt;dbl&gt;,
#   ch_27 &lt;chr&gt;, ch_28 &lt;chr&gt;, ch_29 &lt;chr&gt;, ch_30 &lt;chr&gt;, ch_31 &lt;chr&gt;,
#   ch_32 &lt;chr&gt;, ch_33 &lt;chr&gt;, ch_34 &lt;chr&gt;, ch_35 &lt;chr&gt;, ch_36 &lt;chr&gt;,
#   mo_ht &lt;dbl&gt;, mo_bmi &lt;dbl&gt;, hamd_baseline &lt;dbl&gt;, bdq_baseline &lt;dbl&gt;, …
```
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
* summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1
```
]
 
.panel2-diffs-auto[

]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

*thp
```
]
 
.panel2-diffs-auto[

```
# A tibble: 1,203 × 394
   newid interviewer    uc grandmother employed_mo income_mo income_hh genhealth
   &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    
 1    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 2   226           1     1 No          No                  0 60        Very good
 3   222           6     1 Yes         No                  0 200       Moderate 
 4     3           1     1 No          No                  0 150       Good     
 5   217           3     1 No          No                  0 250       0        
 6   354           1     1 Yes         No                  0 110       Very good
 7    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 8    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 9   225           4     1 No          No                  0 60        Very good
10     2           4     1 Yes         No                  0 60        Good     
# ℹ 1,193 more rows
# ℹ 386 more variables: edu_mo &lt;dbl&gt;, edu_fa &lt;dbl&gt;, ideal_no_kids &lt;chr&gt;,
#   no_kids_over5_dead &lt;dbl&gt;, no_kids_1_5_dead &lt;dbl&gt;, no_kids_less1_dead &lt;dbl&gt;,
#   mo_185 &lt;chr&gt;, mo_358 &lt;chr&gt;, mo_360 &lt;chr&gt;, c_wt &lt;dbl&gt;, c_ht &lt;dbl&gt;,
#   ch_27 &lt;chr&gt;, ch_28 &lt;chr&gt;, ch_29 &lt;chr&gt;, ch_30 &lt;chr&gt;, ch_31 &lt;chr&gt;,
#   ch_32 &lt;chr&gt;, ch_33 &lt;chr&gt;, ch_34 &lt;chr&gt;, ch_35 &lt;chr&gt;, ch_36 &lt;chr&gt;,
#   mo_ht &lt;dbl&gt;, mo_bmi &lt;dbl&gt;, hamd_baseline &lt;dbl&gt;, bdq_baseline &lt;dbl&gt;, …
```
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
* filter(attrit2 == 0 &amp; THP_sample == 1)
```
]
 
.panel2-diffs-auto[

```
# A tibble: 585 × 394
   newid interviewer    uc grandmother employed_mo income_mo income_hh genhealth
   &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    
 1   226           1     1 No          No                  0 60        Very good
 2     3           1     1 No          No                  0 150       Good     
 3   354           1     1 Yes         No                  0 110       Very good
 4   225           4     1 No          No                  0 60        Very good
 5     2           4     1 Yes         No                  0 60        Good     
 6   729           1     1 No          No                  0 65        Good     
 7   228           4     1 No          No                  0 300       0        
 8   180           4     1 No          No                  0 &lt;NA&gt;      Very good
 9   178           1     1 No          No                  0 60        Good     
10   224           7     1 Yes         No                  0 150       Good     
# ℹ 575 more rows
# ℹ 386 more variables: edu_mo &lt;dbl&gt;, edu_fa &lt;dbl&gt;, ideal_no_kids &lt;chr&gt;,
#   no_kids_over5_dead &lt;dbl&gt;, no_kids_1_5_dead &lt;dbl&gt;, no_kids_less1_dead &lt;dbl&gt;,
#   mo_185 &lt;chr&gt;, mo_358 &lt;chr&gt;, mo_360 &lt;chr&gt;, c_wt &lt;dbl&gt;, c_ht &lt;dbl&gt;,
#   ch_27 &lt;chr&gt;, ch_28 &lt;chr&gt;, ch_29 &lt;chr&gt;, ch_30 &lt;chr&gt;, ch_31 &lt;chr&gt;,
#   ch_32 &lt;chr&gt;, ch_33 &lt;chr&gt;, ch_34 &lt;chr&gt;, ch_35 &lt;chr&gt;, ch_36 &lt;chr&gt;,
#   mo_ht &lt;dbl&gt;, mo_bmi &lt;dbl&gt;, hamd_baseline &lt;dbl&gt;, bdq_baseline &lt;dbl&gt;, …
```
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
* group_by(treat)
```
]
 
.panel2-diffs-auto[

```
# A tibble: 585 × 394
# Groups:   treat [2]
   newid interviewer    uc grandmother employed_mo income_mo income_hh genhealth
   &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    
 1   226           1     1 No          No                  0 60        Very good
 2     3           1     1 No          No                  0 150       Good     
 3   354           1     1 Yes         No                  0 110       Very good
 4   225           4     1 No          No                  0 60        Very good
 5     2           4     1 Yes         No                  0 60        Good     
 6   729           1     1 No          No                  0 65        Good     
 7   228           4     1 No          No                  0 300       0        
 8   180           4     1 No          No                  0 &lt;NA&gt;      Very good
 9   178           1     1 No          No                  0 60        Good     
10   224           7     1 Yes         No                  0 150       Good     
# ℹ 575 more rows
# ℹ 386 more variables: edu_mo &lt;dbl&gt;, edu_fa &lt;dbl&gt;, ideal_no_kids &lt;chr&gt;,
#   no_kids_over5_dead &lt;dbl&gt;, no_kids_1_5_dead &lt;dbl&gt;, no_kids_less1_dead &lt;dbl&gt;,
#   mo_185 &lt;chr&gt;, mo_358 &lt;chr&gt;, mo_360 &lt;chr&gt;, c_wt &lt;dbl&gt;, c_ht &lt;dbl&gt;,
#   ch_27 &lt;chr&gt;, ch_28 &lt;chr&gt;, ch_29 &lt;chr&gt;, ch_30 &lt;chr&gt;, ch_31 &lt;chr&gt;,
#   ch_32 &lt;chr&gt;, ch_33 &lt;chr&gt;, ch_34 &lt;chr&gt;, ch_35 &lt;chr&gt;, ch_36 &lt;chr&gt;,
#   mo_ht &lt;dbl&gt;, mo_bmi &lt;dbl&gt;, hamd_baseline &lt;dbl&gt;, bdq_baseline &lt;dbl&gt;, …
```
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
* summarize( depressed_1y = round(mean(depressed_1y, na.rm = T), 3)) -&gt; dep2
```
]
 
.panel2-diffs-auto[

]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_1y = round(mean(depressed_1y, na.rm = T), 3)) -&gt; dep2

*thp
```
]
 
.panel2-diffs-auto[

```
# A tibble: 1,203 × 394
   newid interviewer    uc grandmother employed_mo income_mo income_hh genhealth
   &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    
 1    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 2   226           1     1 No          No                  0 60        Very good
 3   222           6     1 Yes         No                  0 200       Moderate 
 4     3           1     1 No          No                  0 150       Good     
 5   217           3     1 No          No                  0 250       0        
 6   354           1     1 Yes         No                  0 110       Very good
 7    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 8    NA          NA     1 &lt;NA&gt;        &lt;NA&gt;               NA &lt;NA&gt;      &lt;NA&gt;     
 9   225           4     1 No          No                  0 60        Very good
10     2           4     1 Yes         No                  0 60        Good     
# ℹ 1,193 more rows
# ℹ 386 more variables: edu_mo &lt;dbl&gt;, edu_fa &lt;dbl&gt;, ideal_no_kids &lt;chr&gt;,
#   no_kids_over5_dead &lt;dbl&gt;, no_kids_1_5_dead &lt;dbl&gt;, no_kids_less1_dead &lt;dbl&gt;,
#   mo_185 &lt;chr&gt;, mo_358 &lt;chr&gt;, mo_360 &lt;chr&gt;, c_wt &lt;dbl&gt;, c_ht &lt;dbl&gt;,
#   ch_27 &lt;chr&gt;, ch_28 &lt;chr&gt;, ch_29 &lt;chr&gt;, ch_30 &lt;chr&gt;, ch_31 &lt;chr&gt;,
#   ch_32 &lt;chr&gt;, ch_33 &lt;chr&gt;, ch_34 &lt;chr&gt;, ch_35 &lt;chr&gt;, ch_36 &lt;chr&gt;,
#   mo_ht &lt;dbl&gt;, mo_bmi &lt;dbl&gt;, hamd_baseline &lt;dbl&gt;, bdq_baseline &lt;dbl&gt;, …
```
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_1y = round(mean(depressed_1y, na.rm = T), 3)) -&gt; dep2

thp %&gt;%
* filter(attrit2 == 0 &amp; THP_sample == 1)
```
]
 
.panel2-diffs-auto[

```
# A tibble: 585 × 394
   newid interviewer    uc grandmother employed_mo income_mo income_hh genhealth
   &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    
 1   226           1     1 No          No                  0 60        Very good
 2     3           1     1 No          No                  0 150       Good     
 3   354           1     1 Yes         No                  0 110       Very good
 4   225           4     1 No          No                  0 60        Very good
 5     2           4     1 Yes         No                  0 60        Good     
 6   729           1     1 No          No                  0 65        Good     
 7   228           4     1 No          No                  0 300       0        
 8   180           4     1 No          No                  0 &lt;NA&gt;      Very good
 9   178           1     1 No          No                  0 60        Good     
10   224           7     1 Yes         No                  0 150       Good     
# ℹ 575 more rows
# ℹ 386 more variables: edu_mo &lt;dbl&gt;, edu_fa &lt;dbl&gt;, ideal_no_kids &lt;chr&gt;,
#   no_kids_over5_dead &lt;dbl&gt;, no_kids_1_5_dead &lt;dbl&gt;, no_kids_less1_dead &lt;dbl&gt;,
#   mo_185 &lt;chr&gt;, mo_358 &lt;chr&gt;, mo_360 &lt;chr&gt;, c_wt &lt;dbl&gt;, c_ht &lt;dbl&gt;,
#   ch_27 &lt;chr&gt;, ch_28 &lt;chr&gt;, ch_29 &lt;chr&gt;, ch_30 &lt;chr&gt;, ch_31 &lt;chr&gt;,
#   ch_32 &lt;chr&gt;, ch_33 &lt;chr&gt;, ch_34 &lt;chr&gt;, ch_35 &lt;chr&gt;, ch_36 &lt;chr&gt;,
#   mo_ht &lt;dbl&gt;, mo_bmi &lt;dbl&gt;, hamd_baseline &lt;dbl&gt;, bdq_baseline &lt;dbl&gt;, …
```
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_1y = round(mean(depressed_1y, na.rm = T), 3)) -&gt; dep2

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
* group_by(treat)
```
]
 
.panel2-diffs-auto[

```
# A tibble: 585 × 394
# Groups:   treat [2]
   newid interviewer    uc grandmother employed_mo income_mo income_hh genhealth
   &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    
 1   226           1     1 No          No                  0 60        Very good
 2     3           1     1 No          No                  0 150       Good     
 3   354           1     1 Yes         No                  0 110       Very good
 4   225           4     1 No          No                  0 60        Very good
 5     2           4     1 Yes         No                  0 60        Good     
 6   729           1     1 No          No                  0 65        Good     
 7   228           4     1 No          No                  0 300       0        
 8   180           4     1 No          No                  0 &lt;NA&gt;      Very good
 9   178           1     1 No          No                  0 60        Good     
10   224           7     1 Yes         No                  0 150       Good     
# ℹ 575 more rows
# ℹ 386 more variables: edu_mo &lt;dbl&gt;, edu_fa &lt;dbl&gt;, ideal_no_kids &lt;chr&gt;,
#   no_kids_over5_dead &lt;dbl&gt;, no_kids_1_5_dead &lt;dbl&gt;, no_kids_less1_dead &lt;dbl&gt;,
#   mo_185 &lt;chr&gt;, mo_358 &lt;chr&gt;, mo_360 &lt;chr&gt;, c_wt &lt;dbl&gt;, c_ht &lt;dbl&gt;,
#   ch_27 &lt;chr&gt;, ch_28 &lt;chr&gt;, ch_29 &lt;chr&gt;, ch_30 &lt;chr&gt;, ch_31 &lt;chr&gt;,
#   ch_32 &lt;chr&gt;, ch_33 &lt;chr&gt;, ch_34 &lt;chr&gt;, ch_35 &lt;chr&gt;, ch_36 &lt;chr&gt;,
#   mo_ht &lt;dbl&gt;, mo_bmi &lt;dbl&gt;, hamd_baseline &lt;dbl&gt;, bdq_baseline &lt;dbl&gt;, …
```
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_1y = round(mean(depressed_1y, na.rm = T), 3)) -&gt; dep2

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
* summarize( depressed_avg = round(mean(depressed, na.rm = T), 3)) -&gt; dep3
```
]
 
.panel2-diffs-auto[

]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_1y = round(mean(depressed_1y, na.rm = T), 3)) -&gt; dep2

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_avg = round(mean(depressed, na.rm = T), 3)) -&gt; dep3

*dep1
```
]
 
.panel2-diffs-auto[

```
# A tibble: 2 × 2
  treat dep6m_avg
  &lt;dbl&gt;     &lt;dbl&gt;
1     0     0.522
2     1     0.201
```
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_1y = round(mean(depressed_1y, na.rm = T), 3)) -&gt; dep2

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_avg = round(mean(depressed, na.rm = T), 3)) -&gt; dep3

dep1 %&gt;%
* bind_rows(dep2)
```
]
 
.panel2-diffs-auto[

```
# A tibble: 4 × 3
  treat dep6m_avg depressed_1y
  &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
1     0     0.522       NA    
2     1     0.201       NA    
3     0    NA            0.583
4     1    NA            0.249
```
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_1y = round(mean(depressed_1y, na.rm = T), 3)) -&gt; dep2

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_avg = round(mean(depressed, na.rm = T), 3)) -&gt; dep3

dep1 %&gt;%
  bind_rows(dep2) %&gt;%
* bind_rows(dep3)
```
]
 
.panel2-diffs-auto[

```
# A tibble: 6 × 4
  treat dep6m_avg depressed_1y depressed_avg
  &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;
1     0     0.522       NA            NA    
2     1     0.201       NA            NA    
3     0    NA            0.583        NA    
4     1    NA            0.249        NA    
5     0    NA           NA             0.304
6     1    NA           NA             0.239
```
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_1y = round(mean(depressed_1y, na.rm = T), 3)) -&gt; dep2

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_avg = round(mean(depressed, na.rm = T), 3)) -&gt; dep3

dep1 %&gt;%
  bind_rows(dep2) %&gt;%
  bind_rows(dep3) %&gt;%
* pivot_longer(cols = -treat, names_to = "depression", values_to = "value"  )
```
]
 
.panel2-diffs-auto[

```
# A tibble: 18 × 3
   treat depression     value
   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;
 1     0 dep6m_avg      0.522
 2     0 depressed_1y  NA    
 3     0 depressed_avg NA    
 4     1 dep6m_avg      0.201
 5     1 depressed_1y  NA    
 6     1 depressed_avg NA    
 7     0 dep6m_avg     NA    
 8     0 depressed_1y   0.583
 9     0 depressed_avg NA    
10     1 dep6m_avg     NA    
11     1 depressed_1y   0.249
12     1 depressed_avg NA    
13     0 dep6m_avg     NA    
14     0 depressed_1y  NA    
15     0 depressed_avg  0.304
16     1 dep6m_avg     NA    
17     1 depressed_1y  NA    
18     1 depressed_avg  0.239
```
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_1y = round(mean(depressed_1y, na.rm = T), 3)) -&gt; dep2

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_avg = round(mean(depressed, na.rm = T), 3)) -&gt; dep3

dep1 %&gt;%
  bind_rows(dep2) %&gt;%
  bind_rows(dep3) %&gt;%
  pivot_longer(cols = -treat, names_to = "depression", values_to = "value"  ) %&gt;%
* filter( !is.na(value) )
```
]
 
.panel2-diffs-auto[

```
# A tibble: 6 × 3
  treat depression    value
  &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt;
1     0 dep6m_avg     0.522
2     1 dep6m_avg     0.201
3     0 depressed_1y  0.583
4     1 depressed_1y  0.249
5     0 depressed_avg 0.304
6     1 depressed_avg 0.239
```
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_1y = round(mean(depressed_1y, na.rm = T), 3)) -&gt; dep2

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_avg = round(mean(depressed, na.rm = T), 3)) -&gt; dep3

dep1 %&gt;%
  bind_rows(dep2) %&gt;%
  bind_rows(dep3) %&gt;%
  pivot_longer(cols = -treat, names_to = "depression", values_to = "value"  ) %&gt;%
  filter( !is.na(value) ) %&gt;%
* pivot_wider( names_from = depression, values_from = value)
```
]
 
.panel2-diffs-auto[

```
# A tibble: 2 × 4
  treat dep6m_avg depressed_1y depressed_avg
  &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;
1     0     0.522        0.583         0.304
2     1     0.201        0.249         0.239
```
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_1y = round(mean(depressed_1y, na.rm = T), 3)) -&gt; dep2

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_avg = round(mean(depressed, na.rm = T), 3)) -&gt; dep3

dep1 %&gt;%
  bind_rows(dep2) %&gt;%
  bind_rows(dep3) %&gt;%
  pivot_longer(cols = -treat, names_to = "depression", values_to = "value"  ) %&gt;%
  filter( !is.na(value) ) %&gt;%
  pivot_wider( names_from = depression, values_from = value) %&gt;%
* kbl(col.names = c("Treatment", "6 Monate","1 Jahr","7 Jahre"), digits = 3, format = "html")
```
]
 
.panel2-diffs-auto[
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Treatment &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 6 Monate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 1 Jahr &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 7 Jahre &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.522 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.583 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.304 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.201 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.249 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.239 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_1y = round(mean(depressed_1y, na.rm = T), 3)) -&gt; dep2

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_avg = round(mean(depressed, na.rm = T), 3)) -&gt; dep3

dep1 %&gt;%
  bind_rows(dep2) %&gt;%
  bind_rows(dep3) %&gt;%
  pivot_longer(cols = -treat, names_to = "depression", values_to = "value"  ) %&gt;%
  filter( !is.na(value) ) %&gt;%
  pivot_wider( names_from = depression, values_from = value) %&gt;%
  kbl(col.names = c("Treatment", "6 Monate","1 Jahr","7 Jahre"), digits = 3, format = "html") %&gt;%
* kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```
]
 
.panel2-diffs-auto[
&lt;table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Treatment &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 6 Monate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 1 Jahr &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 7 Jahre &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.522 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.583 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.304 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.201 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.249 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.239 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_1y = round(mean(depressed_1y, na.rm = T), 3)) -&gt; dep2

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_avg = round(mean(depressed, na.rm = T), 3)) -&gt; dep3

dep1 %&gt;%
  bind_rows(dep2) %&gt;%
  bind_rows(dep3) %&gt;%
  pivot_longer(cols = -treat, names_to = "depression", values_to = "value"  ) %&gt;%
  filter( !is.na(value) ) %&gt;%
  pivot_wider( names_from = depression, values_from = value) %&gt;%
  kbl(col.names = c("Treatment", "6 Monate","1 Jahr","7 Jahre"), digits = 3, format = "html") %&gt;%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %&gt;%
* kable_paper(full_width = F)
```
]
 
.panel2-diffs-auto[
&lt;table class="table table-striped table-hover table-condensed table-responsive lightable-paper" style='margin-left: auto; margin-right: auto; font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Treatment &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 6 Monate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 1 Jahr &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 7 Jahre &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.522 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.583 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.304 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.201 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.249 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.239 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

---
count: false
 

.panel1-diffs-auto[

```r
thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( dep6m_avg = round(mean(depressed_6m, na.rm = T), 3)) -&gt; dep1

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_1y = round(mean(depressed_1y, na.rm = T), 3)) -&gt; dep2

thp %&gt;%
  filter(attrit2 == 0 &amp; THP_sample == 1) %&gt;%
  group_by(treat) %&gt;%
  summarize( depressed_avg = round(mean(depressed, na.rm = T), 3)) -&gt; dep3

dep1 %&gt;%
  bind_rows(dep2) %&gt;%
  bind_rows(dep3) %&gt;%
  pivot_longer(cols = -treat, names_to = "depression", values_to = "value"  ) %&gt;%
  filter( !is.na(value) ) %&gt;%
  pivot_wider( names_from = depression, values_from = value) %&gt;%
  kbl(col.names = c("Treatment", "6 Monate","1 Jahr","7 Jahre"), digits = 3, format = "html") %&gt;%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %&gt;%
  kable_paper(full_width = F)  %&gt;%
* add_header_above(c(" ", "Anteil an Depressionen" = 3))
```
]
 
.panel2-diffs-auto[
&lt;table class="table table-striped table-hover table-condensed table-responsive lightable-paper" style='margin-left: auto; margin-right: auto; font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"&gt;&lt;div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; "&gt;Anteil an Depressionen&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Treatment &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 6 Monate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 1 Jahr &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 7 Jahre &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.522 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.583 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.304 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.201 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.249 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.239 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

&lt;style&gt;
.panel1-diffs-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-diffs-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-diffs-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;






---

## Schritt 2: Durchschnittliche Differenzen

&lt;table class="table table-striped table-hover table-condensed table-responsive lightable-paper" style='margin-left: auto; margin-right: auto; font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"&gt;&lt;div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; "&gt;Anteil an Depressionen&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Treatment &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 6 Monate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 1 Jahr &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 7 Jahre &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.522 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.583 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.304 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.201 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.249 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.239 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

## Schritt 2: Durchschnittliche Differenzen


```r
reg_dep6m &lt;- lm(depressed_6m ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_dep6m_long &lt;- lm(depressed_6m ~ treat + age_baseline + age_baseline_sq + employed_mo_baseline + mo_emp + grandmother_baseline + MIL + wealth_baseline + edu_lvl_mo_1 + edu_lvl_mo_2 + edu_lvl_mo_3 + edu_mo_baseline + edu_fa_baseline + kids_no + first_child + hamd_baseline + mspss_baseline + month_int + month_int_sq + doi0 + intervr_1 + intervr_2 + intervr_3 +intervr_4 + intervr_5 + intervr_6 + intervr_7 + intervr_8 + intervr_9, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))

reg_dep1y &lt;- lm(depressed_1y ~ treat, data =  filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_dep1y_long &lt;- lm(depressed_1y ~ treat + age_baseline + age_baseline_sq + employed_mo_baseline + mo_emp + grandmother_baseline + MIL + wealth_baseline + edu_lvl_mo_1 + edu_lvl_mo_2 + edu_lvl_mo_3 + edu_mo_baseline + edu_fa_baseline + kids_no + first_child + hamd_baseline + mspss_baseline + month_int + month_int_sq + doi0 + intervr_1 + intervr_2 + intervr_3 +intervr_4 + intervr_5 + intervr_6 + intervr_7 + intervr_8 + intervr_9, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))

reg_dep7y &lt;- lm(depressed ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_dep7y_long &lt;- lm(depressed ~ treat + age_baseline + age_baseline_sq + employed_mo_baseline + mo_emp + grandmother_baseline + MIL + wealth_baseline + edu_lvl_mo_1 + edu_lvl_mo_2 + edu_lvl_mo_3 + edu_mo_baseline + edu_fa_baseline + kids_no + first_child + hamd_baseline + mspss_baseline + month_int + month_int_sq + doi0 + intervr_1 + intervr_2 + intervr_3 +intervr_4 + intervr_5 + intervr_6 + intervr_7 + intervr_8 + intervr_9, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))

rows &lt;- tribble(~term,          ~reg_dep6m,  ~reg_dep6m_long, ~reg_dep1y, ~reg_dep1y_long, ~reg_dep7y, ~reg_dep7y_long,
                "Kontrollvariablen", "Nein", "Ja", "Nein", "Ja", "Nein", "Ja")

attr(rows, 'position') &lt;- c(3)

modelsummary(list(reg_dep6m, reg_dep6m_long, reg_dep1y, reg_dep1y_long, reg_dep7y, reg_dep7y_long), 
          type = "html",
          covariate.labels = c("Treatment"),
          keep = "treat",
          add_rows = rows,
          stars = c('*' = .1, '**' = 0.05, '***' = .01),
          gof_omit = 'DF|Deviance|RMSE|AIC|BIC|Log.Lik',
          add.lines = list(c("Kontrollvariablen", "Nein", "Ja", "Nein", "Ja", "Nein", "Ja")),
          title = "Depression bei Müttern, mit und ohne Kontrollvariablen") %&gt;%
          add_header_above(c(" " = 1,"Nach 6 Monaten" = 2, "Nach 1 Jahr" = 2, "Nach 7 Jahren" = 2))
```

---


## Schritt 2: Durchschnittliche Differenzen

&lt;table style="NAborder-bottom: 0; width: auto !important; margin-left: auto; margin-right: auto;" class="table"&gt;
&lt;caption&gt;Depression bei Müttern, mit und ohne Kontrollvariablen&lt;/caption&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;border-bottom:hidden;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Nach 6 Monaten&lt;/div&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Nach 1 Jahr&lt;/div&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Nach 7 Jahren&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:center;"&gt;  (1) &lt;/th&gt;
   &lt;th style="text-align:center;"&gt;   (2) &lt;/th&gt;
   &lt;th style="text-align:center;"&gt;   (3) &lt;/th&gt;
   &lt;th style="text-align:center;"&gt;   (4) &lt;/th&gt;
   &lt;th style="text-align:center;"&gt;   (5) &lt;/th&gt;
   &lt;th style="text-align:center;"&gt;   (6) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Treatment &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.321*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.321*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.334*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.308*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.065* &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.049 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1.5px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.038) &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.039) &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.038) &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.039) &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.037) &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.037) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Kontrollvariablen &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; Nein &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; Ja &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; Nein &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; Ja &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; Nein &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; Ja &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Num.Obs. &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 584 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 584 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 584 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 584 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 585 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 585 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; R2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.112 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.221 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.115 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.230 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.005 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.165 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; R2 Adj. &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.110 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.181 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.113 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.192 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.004 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.123 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; * p &amp;lt; 0.1, ** p &amp;lt; 0.05, *** p &amp;lt; 0.01&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;/table&gt;

---

### Gegenüberstellung der durchschnittlichen Differenzen

&lt;table class="table table-striped table-hover table-condensed table-responsive lightable-paper" style='margin-left: auto; margin-right: auto; font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"&gt;&lt;div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; "&gt;Anteil an Depressionen&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Treatment &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 6 Monate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 1 Jahr &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 7 Jahre &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.522 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.583 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.304 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.201 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.249 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.239 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

--- 

&lt;table style="NAborder-bottom: 0; width: auto !important; margin-left: auto; margin-right: auto;" class="table"&gt;
&lt;caption&gt;Depression bei Müttern, mit und ohne Kontrollvariablen&lt;/caption&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;border-bottom:hidden;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Nach 6 Monaten&lt;/div&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Nach 1 Jahr&lt;/div&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Nach 7 Jahren&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:center;"&gt;  (1) &lt;/th&gt;
   &lt;th style="text-align:center;"&gt;   (2) &lt;/th&gt;
   &lt;th style="text-align:center;"&gt;   (3) &lt;/th&gt;
   &lt;th style="text-align:center;"&gt;   (4) &lt;/th&gt;
   &lt;th style="text-align:center;"&gt;   (5) &lt;/th&gt;
   &lt;th style="text-align:center;"&gt;   (6) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Treatment &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.321*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.321*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.334*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.308*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.065* &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.049 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1.5px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.038) &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.039) &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.038) &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.039) &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.037) &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.037) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Kontrollvariablen &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; Nein &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; Ja &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; Nein &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; Ja &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; Nein &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; Ja &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Num.Obs. &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 584 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 584 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 584 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 584 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 585 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 585 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; R2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.112 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.221 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.115 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.230 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.005 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.165 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; R2 Adj. &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.110 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.181 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.113 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.192 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.004 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.123 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; * p &amp;lt; 0.1, ** p &amp;lt; 0.05, *** p &amp;lt; 0.01&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;/table&gt;

---

## Schritt 2: Durchschnittliche Differenzen

.question[Sollten wir für irgendwelche Variablen kontrollieren?]

--

.alert[Nein, wir sollten für nichts kontrollieren!]

Alle Pfeile in das Treatment wurden im DAG gelöscht, daher gibt es auch theoretisch keine Confounder auf die wir kontrollieren müssten.

---

## Schritt 2: Durchschnittliche Differenzen

count: false
 

.panel1-financial-auto[

```r
*reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
```
]
 
.panel2-financial-auto[

]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
*reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
```
]
 
.panel2-financial-auto[

]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
*reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
```
]
 
.panel2-financial-auto[

]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
*reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
```
]
 
.panel2-financial-auto[

]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
*reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
```
]
 
.panel2-financial-auto[

]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


*tidy(reg_financial, conf.int = T)
```
]
 
.panel2-financial-auto[

```
# A tibble: 2 × 7
  term             estimate std.error   statistic   p.value conf.low conf.high
  &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept) 0.00000000741    0.0593 0.000000125 1.00        -0.116     0.116
2 treat       0.341            0.0843 4.04        0.0000608    0.175     0.506
```
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
* mutate(term = ifelse( term == "treat", "fin_emp", term))
```
]
 
.panel2-financial-auto[

```
# A tibble: 2 × 7
  term             estimate std.error   statistic   p.value conf.low conf.high
  &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept) 0.00000000741    0.0593 0.000000125 1.00        -0.116     0.116
2 fin_emp     0.341            0.0843 4.04        0.0000608    0.175     0.506
```
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
* bind_rows(tidy(reg_money, conf.int = T))
```
]
 
.panel2-financial-auto[

```
# A tibble: 4 × 7
  term        estimate std.error    statistic   p.value conf.low conf.high
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept) 7.41e- 9    0.0593 0.000000125  1.00        -0.116     0.116
2 fin_emp     3.41e- 1    0.0843 4.04         0.0000608    0.175     0.506
3 (Intercept) 8.03e-10    0.0580 0.0000000138 1.00        -0.114     0.114
4 treat       3.57e- 1    0.0825 4.33         0.0000173    0.195     0.519
```
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
* mutate(term = ifelse( term == "treat", "money", term))
```
]
 
.panel2-financial-auto[

```
# A tibble: 4 × 7
  term        estimate std.error    statistic   p.value conf.low conf.high
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept) 7.41e- 9    0.0593 0.000000125  1.00        -0.116     0.116
2 fin_emp     3.41e- 1    0.0843 4.04         0.0000608    0.175     0.506
3 (Intercept) 8.03e-10    0.0580 0.0000000138 1.00        -0.114     0.114
4 money       3.57e- 1    0.0825 4.33         0.0000173    0.195     0.519
```
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "money", term)) %&gt;%
* bind_rows(tidy(reg_time, conf.int = T))
```
]
 
.panel2-financial-auto[

```
# A tibble: 6 × 7
  term         estimate std.error statistic   p.value conf.low conf.high
  &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)  7.41e- 9    0.0593  1.25e- 7 1.00        -0.116     0.116
2 fin_emp      3.41e- 1    0.0843  4.04e+ 0 0.0000608    0.175     0.506
3 (Intercept)  8.03e-10    0.0580  1.38e- 8 1.00        -0.114     0.114
4 money        3.57e- 1    0.0825  4.33e+ 0 0.0000173    0.195     0.519
5 (Intercept) -1.35e-11    0.0566 -2.39e-10 1.00        -0.111     0.111
6 treat        3.19e- 1    0.0805  3.96e+ 0 0.0000847    0.160     0.477
```
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "money", term)) %&gt;%
  bind_rows(tidy(reg_time, conf.int = T)) %&gt;%
* mutate(term = ifelse( term == "treat", "time", term))
```
]
 
.panel2-financial-auto[

```
# A tibble: 6 × 7
  term         estimate std.error statistic   p.value conf.low conf.high
  &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)  7.41e- 9    0.0593  1.25e- 7 1.00        -0.116     0.116
2 fin_emp      3.41e- 1    0.0843  4.04e+ 0 0.0000608    0.175     0.506
3 (Intercept)  8.03e-10    0.0580  1.38e- 8 1.00        -0.114     0.114
4 money        3.57e- 1    0.0825  4.33e+ 0 0.0000173    0.195     0.519
5 (Intercept) -1.35e-11    0.0566 -2.39e-10 1.00        -0.111     0.111
6 time         3.19e- 1    0.0805  3.96e+ 0 0.0000847    0.160     0.477
```
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "money", term)) %&gt;%
  bind_rows(tidy(reg_time, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "time", term)) %&gt;%
* bind_rows(tidy(reg_style, conf.int = T))
```
]
 
.panel2-financial-auto[

```
# A tibble: 8 × 7
  term         estimate std.error statistic   p.value conf.low conf.high
  &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)  7.41e- 9    0.0593  1.25e- 7 1.00       -0.116      0.116
2 fin_emp      3.41e- 1    0.0843  4.04e+ 0 0.0000608   0.175      0.506
3 (Intercept)  8.03e-10    0.0580  1.38e- 8 1.00       -0.114      0.114
4 money        3.57e- 1    0.0825  4.33e+ 0 0.0000173   0.195      0.519
5 (Intercept) -1.35e-11    0.0566 -2.39e-10 1.00       -0.111      0.111
6 time         3.19e- 1    0.0805  3.96e+ 0 0.0000847   0.160      0.477
7 (Intercept) -1.69e- 9    0.0577 -2.94e- 8 1.00       -0.113      0.113
8 treat        6.31e- 2    0.0820  7.69e- 1 0.442      -0.0980     0.224
```
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "money", term)) %&gt;%
  bind_rows(tidy(reg_time, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "time", term)) %&gt;%
  bind_rows(tidy(reg_style, conf.int = T)) %&gt;%
* mutate(term = ifelse( term == "treat", "style", term))
```
]
 
.panel2-financial-auto[

```
# A tibble: 8 × 7
  term         estimate std.error statistic   p.value conf.low conf.high
  &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)  7.41e- 9    0.0593  1.25e- 7 1.00       -0.116      0.116
2 fin_emp      3.41e- 1    0.0843  4.04e+ 0 0.0000608   0.175      0.506
3 (Intercept)  8.03e-10    0.0580  1.38e- 8 1.00       -0.114      0.114
4 money        3.57e- 1    0.0825  4.33e+ 0 0.0000173   0.195      0.519
5 (Intercept) -1.35e-11    0.0566 -2.39e-10 1.00       -0.111      0.111
6 time         3.19e- 1    0.0805  3.96e+ 0 0.0000847   0.160      0.477
7 (Intercept) -1.69e- 9    0.0577 -2.94e- 8 1.00       -0.113      0.113
8 style        6.31e- 2    0.0820  7.69e- 1 0.442      -0.0980     0.224
```
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "money", term)) %&gt;%
  bind_rows(tidy(reg_time, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "time", term)) %&gt;%
  bind_rows(tidy(reg_style, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "style", term)) %&gt;%
* bind_rows(tidy(reg_fertility, conf.int = T))
```
]
 
.panel2-financial-auto[

```
# A tibble: 10 × 7
   term         estimate std.error statistic   p.value conf.low conf.high
   &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 (Intercept)  7.41e- 9    0.0593  1.25e- 7 1.00       -0.116      0.116
 2 fin_emp      3.41e- 1    0.0843  4.04e+ 0 0.0000608   0.175      0.506
 3 (Intercept)  8.03e-10    0.0580  1.38e- 8 1.00       -0.114      0.114
 4 money        3.57e- 1    0.0825  4.33e+ 0 0.0000173   0.195      0.519
 5 (Intercept) -1.35e-11    0.0566 -2.39e-10 1.00       -0.111      0.111
 6 time         3.19e- 1    0.0805  3.96e+ 0 0.0000847   0.160      0.477
 7 (Intercept) -1.69e- 9    0.0577 -2.94e- 8 1.00       -0.113      0.113
 8 style        6.31e- 2    0.0820  7.69e- 1 0.442      -0.0980     0.224
 9 (Intercept) -2.40e- 9    0.0584 -4.11e- 8 1.00       -0.115      0.115
10 treat        1.67e- 2    0.0831  2.00e- 1 0.841      -0.147      0.180
```
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "money", term)) %&gt;%
  bind_rows(tidy(reg_time, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "time", term)) %&gt;%
  bind_rows(tidy(reg_style, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "style", term)) %&gt;%
  bind_rows(tidy(reg_fertility, conf.int = T)) %&gt;%
* mutate(term = ifelse( term == "treat", "fertility", term))
```
]
 
.panel2-financial-auto[

```
# A tibble: 10 × 7
   term         estimate std.error statistic   p.value conf.low conf.high
   &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 (Intercept)  7.41e- 9    0.0593  1.25e- 7 1.00       -0.116      0.116
 2 fin_emp      3.41e- 1    0.0843  4.04e+ 0 0.0000608   0.175      0.506
 3 (Intercept)  8.03e-10    0.0580  1.38e- 8 1.00       -0.114      0.114
 4 money        3.57e- 1    0.0825  4.33e+ 0 0.0000173   0.195      0.519
 5 (Intercept) -1.35e-11    0.0566 -2.39e-10 1.00       -0.111      0.111
 6 time         3.19e- 1    0.0805  3.96e+ 0 0.0000847   0.160      0.477
 7 (Intercept) -1.69e- 9    0.0577 -2.94e- 8 1.00       -0.113      0.113
 8 style        6.31e- 2    0.0820  7.69e- 1 0.442      -0.0980     0.224
 9 (Intercept) -2.40e- 9    0.0584 -4.11e- 8 1.00       -0.115      0.115
10 fertility    1.67e- 2    0.0831  2.00e- 1 0.841      -0.147      0.180
```
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "money", term)) %&gt;%
  bind_rows(tidy(reg_time, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "time", term)) %&gt;%
  bind_rows(tidy(reg_style, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "style", term)) %&gt;%
  bind_rows(tidy(reg_fertility, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "fertility", term)) %&gt;%
* filter( term != "(Intercept)")
```
]
 
.panel2-financial-auto[

```
# A tibble: 5 × 7
  term      estimate std.error statistic   p.value conf.low conf.high
  &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 fin_emp     0.341     0.0843     4.04  0.0000608   0.175      0.506
2 money       0.357     0.0825     4.33  0.0000173   0.195      0.519
3 time        0.319     0.0805     3.96  0.0000847   0.160      0.477
4 style       0.0631    0.0820     0.769 0.442      -0.0980     0.224
5 fertility   0.0167    0.0831     0.200 0.841      -0.147      0.180
```
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "money", term)) %&gt;%
  bind_rows(tidy(reg_time, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "time", term)) %&gt;%
  bind_rows(tidy(reg_style, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "style", term)) %&gt;%
  bind_rows(tidy(reg_fertility, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "fertility", term)) %&gt;%
  filter( term != "(Intercept)") %&gt;%
*   mutate(term = fct_relevel(term, "fertility", "style", "time", "money", "fin_emp"),
*          term = fct_recode(term,
*                          "Finanzielle Stärkung" = "fin_emp",
*                          "Monetäre Investments" = "money",
*                          "Zeitliche Investments" = "time",
*                          "Erziehungsstil" = "style",
*                          "Fruchtbarkeit" = "fertility"))
```
]
 
.panel2-financial-auto[

```
# A tibble: 5 × 7
  term                  estimate std.error statistic  p.value conf.low conf.high
  &lt;fct&gt;                    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 Finanzielle Stärkung    0.341     0.0843     4.04   6.08e-5   0.175      0.506
2 Monetäre Investments    0.357     0.0825     4.33   1.73e-5   0.195      0.519
3 Zeitliche Investments   0.319     0.0805     3.96   8.47e-5   0.160      0.477
4 Erziehungsstil          0.0631    0.0820     0.769  4.42e-1  -0.0980     0.224
5 Fruchtbarkeit           0.0167    0.0831     0.200  8.41e-1  -0.147      0.180
```
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "money", term)) %&gt;%
  bind_rows(tidy(reg_time, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "time", term)) %&gt;%
  bind_rows(tidy(reg_style, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "style", term)) %&gt;%
  bind_rows(tidy(reg_fertility, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "fertility", term)) %&gt;%
  filter( term != "(Intercept)") %&gt;%
    mutate(term = fct_relevel(term, "fertility", "style", "time", "money", "fin_emp"),
           term = fct_recode(term,
                           "Finanzielle Stärkung" = "fin_emp",
                           "Monetäre Investments" = "money",
                           "Zeitliche Investments" = "time",
                           "Erziehungsstil" = "style",
                           "Fruchtbarkeit" = "fertility")) %&gt;%
* ggplot(aes(x = term, y=estimate, ymin=conf.low, ymax=conf.high))
```
]
 
.panel2-financial-auto[
&lt;img src="Experiment_slides_files/figure-html/financial_auto_18_output-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "money", term)) %&gt;%
  bind_rows(tidy(reg_time, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "time", term)) %&gt;%
  bind_rows(tidy(reg_style, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "style", term)) %&gt;%
  bind_rows(tidy(reg_fertility, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "fertility", term)) %&gt;%
  filter( term != "(Intercept)") %&gt;%
    mutate(term = fct_relevel(term, "fertility", "style", "time", "money", "fin_emp"),
           term = fct_recode(term,
                           "Finanzielle Stärkung" = "fin_emp",
                           "Monetäre Investments" = "money",
                           "Zeitliche Investments" = "time",
                           "Erziehungsstil" = "style",
                           "Fruchtbarkeit" = "fertility")) %&gt;%
  ggplot(aes(x = term, y=estimate, ymin=conf.low, ymax=conf.high)) +
* geom_pointrange()
```
]
 
.panel2-financial-auto[
&lt;img src="Experiment_slides_files/figure-html/financial_auto_19_output-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "money", term)) %&gt;%
  bind_rows(tidy(reg_time, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "time", term)) %&gt;%
  bind_rows(tidy(reg_style, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "style", term)) %&gt;%
  bind_rows(tidy(reg_fertility, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "fertility", term)) %&gt;%
  filter( term != "(Intercept)") %&gt;%
    mutate(term = fct_relevel(term, "fertility", "style", "time", "money", "fin_emp"),
           term = fct_recode(term,
                           "Finanzielle Stärkung" = "fin_emp",
                           "Monetäre Investments" = "money",
                           "Zeitliche Investments" = "time",
                           "Erziehungsstil" = "style",
                           "Fruchtbarkeit" = "fertility")) %&gt;%
  ggplot(aes(x = term, y=estimate, ymin=conf.low, ymax=conf.high)) +
  geom_pointrange() +
* geom_hline(yintercept = 0, col = "orange")
```
]
 
.panel2-financial-auto[
&lt;img src="Experiment_slides_files/figure-html/financial_auto_20_output-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "money", term)) %&gt;%
  bind_rows(tidy(reg_time, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "time", term)) %&gt;%
  bind_rows(tidy(reg_style, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "style", term)) %&gt;%
  bind_rows(tidy(reg_fertility, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "fertility", term)) %&gt;%
  filter( term != "(Intercept)") %&gt;%
    mutate(term = fct_relevel(term, "fertility", "style", "time", "money", "fin_emp"),
           term = fct_recode(term,
                           "Finanzielle Stärkung" = "fin_emp",
                           "Monetäre Investments" = "money",
                           "Zeitliche Investments" = "time",
                           "Erziehungsstil" = "style",
                           "Fruchtbarkeit" = "fertility")) %&gt;%
  ggplot(aes(x = term, y=estimate, ymin=conf.low, ymax=conf.high)) +
  geom_pointrange() +
  geom_hline(yintercept = 0, col = "orange") +
* scale_y_continuous(breaks = c(-0.25,0,0.25,0.5))
```
]
 
.panel2-financial-auto[
&lt;img src="Experiment_slides_files/figure-html/financial_auto_21_output-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "money", term)) %&gt;%
  bind_rows(tidy(reg_time, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "time", term)) %&gt;%
  bind_rows(tidy(reg_style, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "style", term)) %&gt;%
  bind_rows(tidy(reg_fertility, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "fertility", term)) %&gt;%
  filter( term != "(Intercept)") %&gt;%
    mutate(term = fct_relevel(term, "fertility", "style", "time", "money", "fin_emp"),
           term = fct_recode(term,
                           "Finanzielle Stärkung" = "fin_emp",
                           "Monetäre Investments" = "money",
                           "Zeitliche Investments" = "time",
                           "Erziehungsstil" = "style",
                           "Fruchtbarkeit" = "fertility")) %&gt;%
  ggplot(aes(x = term, y=estimate, ymin=conf.low, ymax=conf.high)) +
  geom_pointrange() +
  geom_hline(yintercept = 0, col = "orange") +
  scale_y_continuous(breaks = c(-0.25,0,0.25,0.5)) +
* coord_flip()
```
]
 
.panel2-financial-auto[
&lt;img src="Experiment_slides_files/figure-html/financial_auto_22_output-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "money", term)) %&gt;%
  bind_rows(tidy(reg_time, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "time", term)) %&gt;%
  bind_rows(tidy(reg_style, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "style", term)) %&gt;%
  bind_rows(tidy(reg_fertility, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "fertility", term)) %&gt;%
  filter( term != "(Intercept)") %&gt;%
    mutate(term = fct_relevel(term, "fertility", "style", "time", "money", "fin_emp"),
           term = fct_recode(term,
                           "Finanzielle Stärkung" = "fin_emp",
                           "Monetäre Investments" = "money",
                           "Zeitliche Investments" = "time",
                           "Erziehungsstil" = "style",
                           "Fruchtbarkeit" = "fertility")) %&gt;%
  ggplot(aes(x = term, y=estimate, ymin=conf.low, ymax=conf.high)) +
  geom_pointrange() +
  geom_hline(yintercept = 0, col = "orange") +
  scale_y_continuous(breaks = c(-0.25,0,0.25,0.5)) +
  coord_flip() +
* labs(
*   x = NULL, y = "Effektgröße als Standardabweichung der Kontrollgruppe",
*   title = "Effekt der Intervention auf ökonomische Entscheidungen der Mutter",
*   subtitle = "95% Konfidenzintervall um den Punktschätzer"
*   )
```
]
 
.panel2-financial-auto[
&lt;img src="Experiment_slides_files/figure-html/financial_auto_23_output-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---
count: false
 

.panel1-financial-auto[

```r
reg_financial &lt;- lm(motherfinancial ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_money &lt;- lm(parentmoney ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_time&lt;- lm(parenttime ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_style &lt;- lm(parentstyle ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))
reg_fertility &lt;- lm(fertility_vars ~ treat, data = filter(thp, attrit2 == 0 &amp; THP_sample == 1))


tidy(reg_financial, conf.int = T) %&gt;%
  mutate(term = ifelse( term == "treat", "fin_emp", term))%&gt;%
  bind_rows(tidy(reg_money, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "money", term)) %&gt;%
  bind_rows(tidy(reg_time, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "time", term)) %&gt;%
  bind_rows(tidy(reg_style, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "style", term)) %&gt;%
  bind_rows(tidy(reg_fertility, conf.int = T)) %&gt;%
  mutate(term = ifelse( term == "treat", "fertility", term)) %&gt;%
  filter( term != "(Intercept)") %&gt;%
    mutate(term = fct_relevel(term, "fertility", "style", "time", "money", "fin_emp"),
           term = fct_recode(term,
                           "Finanzielle Stärkung" = "fin_emp",
                           "Monetäre Investments" = "money",
                           "Zeitliche Investments" = "time",
                           "Erziehungsstil" = "style",
                           "Fruchtbarkeit" = "fertility")) %&gt;%
  ggplot(aes(x = term, y=estimate, ymin=conf.low, ymax=conf.high)) +
  geom_pointrange() +
  geom_hline(yintercept = 0, col = "orange") +
  scale_y_continuous(breaks = c(-0.25,0,0.25,0.5)) +
  coord_flip() +
  labs(
    x = NULL, y = "Effektgröße als Standardabweichung der Kontrollgruppe",
    title = "Effekt der Intervention auf ökonomische Entscheidungen der Mutter",
    subtitle = "95% Konfidenzintervall um den Punktschätzer"
    ) +
* theme_minimal()
```
]
 
.panel2-financial-auto[
&lt;img src="Experiment_slides_files/figure-html/financial_auto_24_output-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

&lt;style&gt;
.panel1-financial-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-financial-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-financial-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

## Schritt 2: Durchschnittliche Differenzen

&lt;img src="Experiment_slides_files/figure-html/unnamed-chunk-11-1.png" width="40%" style="display: block; margin: auto;" /&gt;

---

## Experimente als "Goldstandard"?

Oft werden Experimente als "Goldstandard" für die kausale Inferenz betrachtet.

--

.instructions[Experimente sind sehr schön!]

.alert[Doch Experimente sind meist sehr schwer durchzuführen und in manchen Situationen gar nicht denkbar!]

--

&gt; Was uns interessiert sind kausale Effekte zu messen und dafür sind Experimente eine wichtige Säule, aber nicht die einzige Möglichkeit!

---

## Experimente und interne Validität

Experimente können sehr viele Probleme bzgl. interner Validität lösen

- Selektion
    - Treatment und Kontrollgruppen sind vergleichbar
    - Keine Selbstselektion
- Trends
    - Keine Saisonalität
    - Keine Regression zur Mitte

---

## Experimente und interne Validität

.instructions[**Jedoch:** Experimente können nicht das Problem der _Attrition_ beheben!]

Wenn Attrition mit dem Treatment korreliert ist haben wir ein Problem

Genauer: Wenn Personen selektiv aufhören an der Studie teilzunehmen, in Abhängigkeit davon ob sie getreatet wurden oder nicht, dann hilft uns auch ein sehr schön designtes Experiment nicht weiter.

---

## Experimente und interne Validität

Für unser Experiment:

- Nach 7 Jahren hatten die Autoren noch eine Befragung der Frauen durchgeführt
- Wenn die Attrition in der Treatment und Kontrollgruppen über diese 7 Jahre hinweg unterschiedlich war und nun z.B. doppelt so viele Frauen aus der Kontrollgruppe in der Stichprobe sind, dann wäre die Attrition mit dem Treatment Status korreliert und unsere Aussagen nicht mehr valide

---

## Experimente und interne Validität

&lt;table class="table table-striped table-hover table-condensed table-responsive lightable-paper" style='margin-left: auto; margin-right: auto; font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;border-bottom: 0;'&gt;
&lt;caption&gt;Balancing Tabelle für die Grundcharakteristika&lt;/caption&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="4"&gt;&lt;div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; "&gt;Stichprobe Baseline (N = 585)&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Treatment &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Kontrolle &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Differenz &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p-Wert &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Stiefoma im Haus &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.48 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.39 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.09 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.04 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alter der Mutter &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 26.71 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.32 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.44 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Depressiv (1 Jahr) &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.25 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.58 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.33 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Bildung des Vaters &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6.98 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.20 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.22 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.48 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Vater beschäftigt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.88 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Mutter beschäftigt &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.38 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Erstes Kind &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.65 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Anzahl der Kinder &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.42 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.34 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.02 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Oma im Haus &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.05 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.03 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.11 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;
&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;&lt;span style="font-style: italic;"&gt;Note: &lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; Diese Tabelle testet, wie ausbalanciert die Beobachtungen in der Stichprobe nach 7 Jahren sind. In den ersten beiden Spalten wird der Mittelwert für die Treatment bzw. Kontrollgruppe für die Stichprobe nach 7 Jahren gezeigt. Spalte (3) zeigen die Differenz zwischen den Mittelwerten der Treatment und Kontrollgruppe für die jeweilige Stichprobe und die Spalte (4) zeigt die p-Werte und damit ob die einzelnen Mittelwerte statistisch signifikant unterschiedlich voneinander sind.&lt;/td&gt;&lt;/tr&gt;
&lt;/tfoot&gt;
&lt;/table&gt;


---

## Experimente und interne Validität

Es ist wichtig auf Attrition zu achten:
  - Versuchen Sie so viele Charakteristika über ihre Teilnehmer zu bekommen wie möglich
  - Untersuchen Sie anhand dieser Charakteristika ob die Attrition zwischen den zwei Gruppen zufällig war
  - Versuchen Sie das Committment ihrer Teilnehmer am Experiment so hoch wie möglich zu halten
  
Ein weiteres Problem des Experiments könnte sein, das die Teilnehmer sich nicht an das halten, was sie vorgeben:
  - Manche Teilnehmer der Treatment Gruppe werden das Treatment einfach nicht nehmen
  - Manche Teilnehmer der Kontrollgruppe werden eventuell doch an das Treatment kommen
  
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "atelier-forest-light",
"highlightLanguage": ["r", "yaml", "markdown"],
"slideNumberFormat": "",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
